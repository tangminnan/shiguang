<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="keywords" content="" />
	<meta name="description" content="" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<title>门店销售</title>
	<link rel="stylesheet" href="/css/css.css" type="text/css">
	<script type="text/javascript" src="/js/jquery-1.11.3.min.js"></script>
	<script type="text/javascript" src="/js/jquery.SuperSlide.2.1.1.js"></script>
</head>
<body>
<!--<div class="topTab">-->
	<!--<ul>-->
		<!--<li class="on"><a href="">门店销售</a></li>-->
		<!--&lt;!&ndash;<li><a href="">当日未结算管理</a></li>&ndash;&gt;-->
	<!--</ul>-->
<!--</div>-->
<form class="form-horizontal m-t" id="signupForm">
<!--顾客资料-->
<div class="m40 msgBox">
	<h3>顾客资料 <span class="sure_red">可直接输入会员卡号并按【回车键】确认</span></h3>
	<div class="gukeMSG1">
		<span class="s1"><input type="button" value="查询" onclick="getSelect()"/></span>
		<span class="s2">卡号：<input type="text" value="" id="cardMember" th:value="${memberDO.cardNumber}"/></span>
		<span class="s3">
			<input type="button" value="会员新增" onclick="getMemberAdd()"/>
			<input type="button" value="会员修改" onclick="getMemberEdit()"/>
		</span>
		<span class="s4">
			<label><input name="eyeType" type="radio" value="框镜" checked onchange="getCheck(this.value)"> 框镜</label>
			<label><input name="eyeType" type="radio" value="隐形" onchange="getCheck(this.value)"> 隐形</label>
			<label><input name="eyeType" type="radio" value="辅料" onchange="getCheck(this.value)"> 辅料</label>
		</span>
		<span class="s5">
			<input type="button" onclick="updatePerson()" value="更换销售人员" />
				<select id="saleName" name="saleName" disabled="disabled">
					<option></option>
					<option th:each="ls:${userDOList}"
							th:text="${ls.name}"
							th:value="${ls.name}"></option>
					<input id="salenames" name="saleName" th:value="${saleName}" type="hidden"/>
				</select>
		</span>
	</div>
	<div class="gukeMSG2">
		顾客姓名：<input type="text" id="memberName" th:value="${memberDO.name}" disabled/>
		顾客电话：<input type="text"  id="memberTel" th:value="${memberDO.phone1}" disabled/>
		性别：<input class="short" type="text" id="memberSex" th:value="${memberDO.sexx}" disabled/>
		年龄：<input class="short" type="text" id="memberAge" th:value="${memberDO.age}" disabled/>
		会员卡类型：<input type="text" id="memberType" th:value="${memberDO.cardType}" disabled/>
		积分：<input type="text" id="memberPoint" value="200" disabled/>
		来源：<input type="text" id="memberSource" th:value="${memberDO.source}" disabled/>
		<input id="memberId" name="memberId" th:value="${memberDO.id}"  type="hidden">
		<input id="memberInumber" name="memberInumber" th:value="${memberDO.cardNumber}"  type="hidden">
		<input id="memname" name="memname" th:value="${memberDO.name}"  type="hidden">
		<input id="memberNumber" name="memberNumber" th:value="${memberDO.cardNumber}"  type="hidden">
		<!--<input id="memberInumber" name="memberInumber" th:value="${memberDO.cardNumber}"  type="hidden">-->
		<input class="xiangQ" type="button" value="详情" onclick="getMemberDetail()"/>
	</div>
</div>

<!--处方类型-->
<div class="m40 tabS colorTab">
	<h3>处方类型</h3>

	<!--左侧表格-->
	<div class="blueLeft">
		<div class="blueLeft_top">
			<table cellspacing="0" cellpadding="0">
				<tr class="blueTop">
					<td colspan="3">
						<label><input name="chufang" type="radio" value="1" checked onchange="getChufang(this.value)"> 提交处方</label>
						<label><input name="chufang" type="radio" value="2" onchange="getChufang(this.value)"> 手填处方</label>
					</td>
				</tr>

				<tr id="tab1" style="display:none">
					<td style="width: 24%;">验光号</td>
					<td>001</td>
				</tr>
				<tr id="tab11" style="display:none;">
					<td>验光师</td>
					<td>
						<select id="disaa" name="optometryName" style="width: 100px;">
							<option th:each="ls:${yanguangDOList}"
									th:text="${ls.name}"
									th:value="${ls.name}"></option>
						</select>
						<em></em>
					</td>
				</tr>
				<tr id="tab111" style="display:none;">
					<td>外来处方</td>
					<td class="wailai">
						<label><input name="wailai" type="checkbox" onclick="check(this)"> 外来处方</label>
						<select id="outRecipel" name="outRecipel" style="display: none;width: 100px;">
							<option value="">--请选择--</option>
							<option value="自报光度">自报光度</option>
							<option value="医院处方">医院处方</option>
						</select>
					</td>
				</tr>
				<tr id="tab1111" style="display:none;">
					<td>验光时间</td>
					<td><input id="yanguangTime" name="yanguangTime" readonly/></td>
				</tr>
				<tr id="tab11111" style="display:none;">
					<td>处方类型</td>
					<td>
						<select id="recipelType" name="recipelType" onchange="getType(this.value)">
							<option value="2" >远用</option>
							<option value="1" >近用</option>
							<option value="3" >渐进/双光</option>
							<option value="4" >中用</option>
							<option value="5" >隐形</option>
							<option value="6" >角膜塑形镜</option>
							<option value="7" >视觉训练</option>
							<option value="8" >角膜塑形镜VST</option>
							<option value="9" >角膜塑形镜CRT</option>
							<option value="10" >RGP</option>
							<option value="11" >药品</option>
						</select>
						<!--<input class="empty" type="button" value="清空" />-->
					</td>
				</tr>
				<tr id="tab111111" style="display:none;">
					<td class="chuF_red" colspan="2" style="color: #fc4242">会员使用外来处方或者未通过验光正式提交处方时使用！</td>
				</tr>

				<tr id="tab2" style="display:''">
					<td style="width:25%;">处方类型</td>
					<td style="width:25%;">验光师</td>
					<td>验光时间</td>
				</tr>
			</table>
		</div>
		<div class="blueLeft_down" id="tab22" style="display: '';">
			<table cellspacing="0" cellpadding="0">
				<tbody id="tbodys">
				</tbody>
			</table>
		</div>
	</div>

	<!--右侧表格-->
	<div class="greenRight" style="display: block;" id="kuangjing">
		<table class="greenTab" cellspacing="0" cellpadding="0">
			<tbody>
			<tr class="Light_green">
				<td>远用</td>
				<td>球镜</td>
				<td>柱镜</td>
				<td>轴向</td>
				<td>三棱镜</td>
				<td>基地</td>
				<td>远用瞳距（mm）</td>
				<td>瞳高(mm)</td>
				<td>远用VA</td>
			</tr>
			<tr>
				<td class="Light_green">OD</td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td>
					<select>
						<option value="">请选择</option>
						<option value="">内</option>
						<option value="">外</option>
						<option value="">上</option>
						<option value="">下</option>
					</select>
				</td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
			</tr>
			<tr>
				<td class="Light_green">OS</td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td>
					<select>
						<option value="">请选择</option>
						<option value="1">内</option>
						<option value="2">外</option>
						<option value="3">上</option>
						<option value="4">下</option>
					</select>
				</td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
			</tr>
			<tr class="Light_green aling_left">
				<td colspan="3">建议镜片材质：</td>
				<td colspan="3">处理方式：</td>
				<td colspan="3">建议镜框：</td>
			</tr>
			<tr>
				<td class="Light_green">备注：</td>
				<td colspan="8"><input class="aling_left" type="text" value=" " /></td>
			</tr>
			<tr class="Light_green">
				<td> </td>
				<td>旧瞳距(mm)</td>
				<td>片高(mm)</td>
				<td>片宽(mm)</td>
				<td>中梁(mm)</td>
				<td>镜片通道(mm)</td>
				<td>对角线(mm)</td>
				<td>框型</td>
				<td>直径(mm)</td>
			</tr>
			<tr>
				<td class="Light_green">手动填写</td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
			</tr>
			</tbody>
		</table>
	</div>

	<!--右侧表格-->
	<div class="greenRight" style="display: none" id="yinxing">
		<table class="greenTab pinkTab" cellspacing="0" cellpadding="0">
			<tbody>
			<tr class="Light_pink">
				<td> </td>
				<td>BC</td>
				<td>球镜</td>
				<td>柱镜</td>
				<td>轴向</td>
				<td>曲率</td>
				<td>直径</td>
				<td>隐形VA</td>
				<td>适用镜片</td>
				<td>适用镜片</td>
			</tr>
			<tr>
				<td class="Light_pink">OD</td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
			</tr>
			<tr>
				<td class="Light_pink">OS</td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
			</tr>
			<tr class="Light_pink aling_left">
				<td>建议护理液：</td>
				<td colspan="9"> </td>
			</tr>
			<tr>
				<td class="Light_pink">备注：</td>
				<td colspan="9"><input class="aling_left" type="text" value=" " /></td>
			</tr>
			</tbody>
		</table>
	</div>

	<!--右侧表格-->
	<div class="greenRight" style="display: none" id="fuliao">
		<table class="greenTab blueTab" cellspacing="0" cellpadding="0">
			<tbody>
			<tr class="Light_blue">
				<td>近用</td>
				<td>球镜</td>
				<td>柱镜</td>
				<td>轴向</td>
				<td>三棱镜</td>
				<td>基地</td>
				<td>远用瞳距（mm）</td>
				<td>瞳高(mm)</td>
				<td>远用VA</td>
			</tr>
			<tr>
				<td class="Light_blue">OD</td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td>
					<select>
						<option value="">请选择</option>
						<option value="1">内</option>
						<option value="2">外</option>
						<option value="3">上</option>
						<option value="4">下</option>
					</select>
				</td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
			</tr>
			<tr>
				<td class="Light_blue">OS</td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td>
					<select>
						<option value="">请选择</option>
						<option value="1">内</option>
						<option value="2">外</option>
						<option value="3">上</option>
						<option value="4">下</option>
					</select>
				</td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
			</tr>
			<tr class="Light_blue aling_left">
				<td colspan="3">建议镜片材质：</td>
				<td colspan="3">处理方式：</td>
				<td colspan="3">建议镜框：</td>
			</tr>
			<tr>
				<td class="Light_blue">备注：</td>
				<td colspan="8"><input class="aling_left" type="text" value=" " /></td>
			</tr>
			<tr class="Light_blue">
				<td> </td>
				<td>旧瞳距(mm)</td>
				<td>片高(mm)</td>
				<td>片宽(mm)</td>
				<td>中梁(mm)</td>
				<td>镜片通道(mm)</td>
				<td>对角线(mm)</td>
				<td>框型</td>
				<td>直径(mm)</td>
			</tr>
			<tr>
				<td class="Light_blue">手动填写</td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
			</tr>
			</tbody>
		</table>
	</div>

	<!--右侧表格-->
	<div class="greenRight" style="display: none;" id="jianjinsg">
		<table class="greenTab yellowTab" cellspacing="0" cellpadding="0">
			<tbody>
			<tr class="Light_yellow">
				<td>渐进/双光近用</td>
				<td>球镜</td>
				<td>柱镜</td>
				<td>轴向</td>
				<td>三棱镜</td>
				<td>基地</td>
				<td>远用瞳距（mm）</td>
				<td>瞳高(mm)</td>
				<td>远用VA</td>
			</tr>
			<tr>
				<td class="Light_yellow">OD</td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td>
					<select>
						<option value="">请选择</option>
						<option value="1">内</option>
						<option value="2">外</option>
						<option value="3">上</option>
						<option value="4">下</option>
					</select>
				</td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
			</tr>
			<tr>
				<td class="Light_yellow">OS</td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td>
					<select>
						<option value="">请选择</option>
						<option value="1">内</option>
						<option value="2">外</option>
						<option value="3">上</option>
						<option value="4">下</option>
					</select>
				</td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
			</tr>
			<tr class="Light_yellow aling_left">
				<td colspan="3">建议镜片材质：</td>
				<td colspan="3">处理方式：</td>
				<td colspan="3">建议镜框：</td>
			</tr>
			<tr>
				<td class="Light_yellow">备注：</td>
				<td colspan="8"><input class="aling_left" type="text" value=" " /></td>
			</tr>
			<tr class="Light_yellow">
				<td> </td>
				<td>旧瞳距(mm)</td>
				<td>片高(mm)</td>
				<td>片宽(mm)</td>
				<td>中梁(mm)</td>
				<td>镜片通道(mm)</td>
				<td>对角线(mm)</td>
				<td>框型</td>
				<td>直径(mm)</td>
			</tr>
			<tr>
				<td class="Light_yellow">手动填写</td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
			</tr>
			</tbody>
		</table>
	</div>

	<!--右侧表格-->
	<div class="greenRight" style="display: none;" id="zhongyong">
		<table class="greenTab darkBlueTab" cellspacing="0" cellpadding="0">
			<tbody>
			<tr class="Light_darkBlue">
				<td>中用</td>
				<td>球镜</td>
				<td>柱镜</td>
				<td>轴向</td>
				<td>三棱镜</td>
				<td>基地</td>
				<td>远用瞳距（mm）</td>
				<td>瞳高(mm)</td>
				<td>远用VA</td>
			</tr>
			<tr>
				<td class="Light_darkBlue">OD</td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td>
					<select>
						<option value="">请选择</option>
						<option value="1">内</option>
						<option value="2">外</option>
						<option value="3">上</option>
						<option value="4">下</option>
					</select>
				</td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
			</tr>
			<tr>
				<td class="Light_darkBlue">OS</td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td>
					<select>
						<option value="">请选择</option>
						<option value="1">内</option>
						<option value="2">外</option>
						<option value="3">上</option>
						<option value="4">下</option>
					</select>
				</td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
			</tr>
			<tr class="Light_darkBlue aling_left">
				<td colspan="3">建议镜片材质：</td>
				<td colspan="3">处理方式：</td>
				<td colspan="3">建议镜框：</td>
			</tr>
			<tr>
				<td class="Light_darkBlue">备注：</td>
				<td colspan="8"><input class="aling_left" type="text" value=" " /></td>
			</tr>
			<tr class="Light_darkBlue">
				<td> </td>
				<td>旧瞳距(mm)</td>
				<td>片高(mm)</td>
				<td>片宽(mm)</td>
				<td>中梁(mm)</td>
				<td>镜片通道(mm)</td>
				<td>对角线(mm)</td>
				<td>框型</td>
				<td>直径(mm)</td>
			</tr>
			<tr>
				<td class="Light_darkBlue">手动填写</td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
			</tr>
			</tbody>
		</table>
	</div>

	<!--右侧表格-->
	<div class="greenRight" style="display: none;" id="jiaomosx">
		<table class="greenTab pinkTab" cellspacing="0" cellpadding="0">
			<tbody>
			<tr class="Light_pink">
				<td> </td>
				<td>球镜</td>
				<td>柱镜</td>
				<td>轴向</td>
				<td>平K</td>
				<td>陡K</td>
				<td>e值</td>
				<td>角膜直径</td>
				<td>试戴片K</td>
				<td>K1</td>
				<td>K2</td>
			</tr>
			<tr>
				<td class="Light_pink">OD</td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
			</tr>
			<tr>
				<td class="Light_pink">OS</td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="" /></td>
				<td><input type="text" value="" /></td>
				<td><input type="text" value="" /></td>
				<td><input type="text" value="" /></td>
				<td><input type="text" value="" /></td>
				<td><input type="text" value="" /></td>
			</tr>
			<tr class="Light_pink">
				<td> </td>
				<td>光度</td>
				<td>降幅</td>
				<td>直径</td>
				<td>适用镜片</td>
				<td colspan="6">片/盒数</td>
			</tr>
			<tr>
				<td class="Light_pink">OD</td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td colspan="6"><input type="text" value=" " /></td>
			</tr>
			<tr>
				<td class="Light_pink">OS</td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td colspan="6"><input type="text" value=" " /></td>
			</tr>
			</tbody>
		</table>
	</div>

	<!--右侧表格-->
	<div class="greenRight" style="display: none;" id="shijuexl">
		<table class="greenTab" cellspacing="0" cellpadding="0">
			<tbody>
			<tr class="Light_green">
				<td>视觉训练</td>
				<td>球镜</td>
				<td>柱镜</td>
				<td>轴向</td>
				<td>三棱镜</td>
				<td style="width:11%;">基地</td>
				<td>远用瞳距（mm）</td>
				<td>近用瞳距（mm）</td>
				<td>远用VA</td>
				<td>近用VA</td>
			</tr>
			<tr>
				<td class="Light_green">OD</td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td>
					<select>
						<option value="">请选择</option>
						<option value="1">内</option>
						<option value="2">外</option>
						<option value="3">上</option>
						<option value="4">下</option>
					</select>
				</td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
			</tr>
			<tr>
				<td class="Light_green">OS</td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td>
					<select>
						<option value="">请选择</option>
						<option value="1">内</option>
						<option value="2">外</option>
						<option value="3">上</option>
						<option value="4">下</option>
					</select>
				</td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
			</tr>
			<tr class="Light_green aling_left">
				<td colspan="6">家庭训练：</td>
				<td colspan="4">训练室训练：</td>
			</tr>
			<tr>
				<td class="Light_green">备注：</td>
				<td colspan="9"><input class="aling_left" type="text" value=" " /></td>
			</tr>
			</tbody>
		</table>
	</div>

	<!--右侧表格-->
	<div class="greenRight" style="display: none;" id="jiaomosxVST">
		<table class="greenTab pinkTab" cellspacing="0" cellpadding="0">
			<tbody>
			<tr class="Light_pink">
				<td>角膜塑形镜VST</td>
				<td>试戴片编号</td>
				<td>FK</td>
				<td>曲率半径</td>
				<td>AC</td>
				<td style="width:14%;">降幅</td>
				<td>DIA</td>
				<td>BC</td>
			</tr>
			<tr>
				<td class="Light_pink">OD</td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
			</tr>
			<tr>
				<td class="Light_pink">OS</td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
			</tr>
			<tr class="Light_pink">
				<td> </td>
				<td>CP/CLY</td>
				<td>E值</td>
				<td>VA</td>
				<td colspan="2">镜片颜色</td>
				<td colspan="2">品牌</td>
			</tr>
			<tr>
				<td class="Light_pink">OD</td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td colspan="2">
					<select>
						<option value="">无色</option>
						<option value="">蓝色</option>
						<option value="">粉色</option>
					</select>
				</td>
				<td colspan="2"><input type="text" value=" " /></td>
			</tr>
			<tr>
				<td class="Light_pink">OS</td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td><input type="text" value=" " /></td>
				<td colspan="2">
					<select>
						<option value="">无色</option>
						<option value="">蓝色</option>
						<option value="">粉色</option>
					</select>
				</td>
				<td colspan="2"><input type="text" value=" " /></td>
			</tr>
			<tr>
				<td class="Light_pink">备注：</td>
				<td colspan="8"><input class="aling_left" type="text" value=" " /></td>
			</tr>
			</tbody>
		</table>
	</div>

	<!--右侧表格-->
	<div class="greenRight" style="display: none;" id="jiaomosxCRT">
		<table class="greenTab pinkTab" cellspacing="0" cellpadding="0">
			<tbody>
			<tr class="Light_pink">
				<td>角膜塑形镜CRT</td>
				<td>试戴片编号</td>
				<td>BC</td>
				<td>RZD</td>
				<td>LZA</td>
				<td>RZD2</td>
				<td>LZA2</td>
				<td>降幅</td>
				<td>DIA</td>
				<td>VA</td>
				<td style="width:10%;">镜片颜色</td>
				<td style="width:12%;">品牌</td>
			</tr>
			<tr>
				<td class="Light_pink">OD</td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td>
					<select>
						<option value="">无色</option>
						<option value="">蓝色</option>
						<option value="">粉色</option>
					</select>
				</td>
				<td><input type="text" value="" /></td>
			</tr>
			<tr>
				<td class="Light_pink">OS</td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td>
					<select>
						<option value="">无色</option>
						<option value="">蓝色</option>
						<option value="">粉色</option>
					</select>
				</td>
				<td><input type="text" value="" /></td>
			</tr>
			<tr>
				<td class="Light_pink">备注：</td>
				<td colspan="11"><input class="aling_left" type="text" value=" " /></td>
			</tr>
			</tbody>
		</table>
	</div>

	<!--右侧表格-->
	<div class="greenRight" style="display: none;" id="rgp">
		<table class="greenTab pinkTab" cellspacing="0" cellpadding="0">
			<tbody>
			<tr class="Light_pink">
				<td>RGP</td>
				<td>SK</td>
				<td>FK</td>
				<td>屈光度</td>
				<td>BC</td>
				<td>DIA</td>
				<td>散光</td>
				<td style="width:10%;">镜片颜色</td>
				<td style="width:14%">特殊设计</td>
				<td style="width:14%">品牌</td>
			</tr>
			<tr>
				<td class="Light_pink">OD</td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td>
					<select>
						<option value="">无色</option>
						<option value="">蓝色</option>
						<option value="">粉色</option>
					</select>
				</td>
				<td><input type="text" value="" /></td>
				<td><input type="text" value="" /></td>
			</tr>
			<tr>
				<td class="Light_pink">OS</td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td><input type="text" value="0.75" /></td>
				<td>
					<select>
						<option value="">无色</option>
						<option value="">蓝色</option>
						<option value="">粉色</option>
					</select>
				</td>
				<td><input type="text" value="" /></td>
				<td><input type="text" value="" /></td>
			</tr>
			<tr>
				<td class="Light_pink">备注：</td>
				<td colspan="11"><input class="aling_left" type="text" value=" " /></td>
			</tr>
			</tbody>
		</table>
	</div>

	<!--右侧表格-->
	<div class="greenRight" style="display: none;" id="yaopin">
		<table class="greenTab pinkTab" cellspacing="0" cellpadding="0">
			<tbody>
			<tr class="Light_pink">
				<td>药品</td>
				<td style="border-left:none;"> </td>
			</tr>
			<tr>
				<td class="Light_pink">内容</td>
				<td><input class="aling_left" type="text" value=" " /></td>
			</tr>
			<tr>
				<td class="Light_pink">药名</td>
				<td ><input class="aling_left" type="text" value=" " /></td>
			</tr>
			<tr style="background:#f9d2d7;">
				<td> </td>
				<td class="pinkCho">
					<input type="button" value="选择" />
					<input class="empty" type="button" value="清空" />
				</td>
			</tr>
			</tbody>
		</table>
	</div>

</div>

<!--商品结算-->
<div class="m40" style="overflow: hidden;margin-bottom: 80px;">
	<h3>商品结算</h3>
	<!--上面一排金额结算表-->
	<div class="settlement">
		<ul class="ulA" id="ula">
		</ul>
		<ul class="ulB">
			<li>
				取镜方式：
				<select id="mirrorWay" name="mirrorWay">
					<option th:each="ls:${eyesWayList}"
							th:text="${ls.eyeWay}"
							th:value="${ls.eyeWay}"></option>
					<!--<option value="正常">正常</option>-->
					<!--<option value="订做7">订做7</option>-->
					<!--<option value="订做10">订做10</option>-->
					<!--<option value="订做15">订做15</option>-->
					<!--<option value="订做25">订做25</option>-->
				</select>
			</li>
			<li>取镜日期：<input type="text" id="mirrorTime" name="mirrorTime"/></li>
			<li>
				取镜地点：
				<input id="mirorAddress" name="mirorAddress" type="text" th:value="${storeName}" disabled>
				<em></em>
			</li>
			<li>
				加急状态：
				<select id="urgentStatus" name="urgentStatus">
					<option value="正常">正常</option>
					<option value="加急">加急</option>
				</select>
			</li>
			<li><input class="youji" type="button" value="填写邮寄信息" /></li>
		</ul>
		<ul class="ulC">
			<li>实收金额：<input type="text" id="amountMoney" name="amountMoney"/></li>
			<li>商品打折：<input type="text"  disabled /><input type="button" value="还原" /></li>
			<li>一口价：<input type="text" disabled /><input type="button" class="qianpi" value="签批" /><input type="button" value="还原" /></li>
			<li>抹零金额：<input type="text" value="0.00" id="molingMoney" onfocus="if (value =='0.00'){value =''}" onblur="if (value ==''){value='0.00'}" name="molingMoney" onchange="getChangeValue()"/></li>
		</ul>
		<div class="JSbtn"><input type="submit" value="结算"/></div>
	</div>

	<!--结算下面左侧套餐盒子-->
	<div class="taoCanbox">
		<div class="gray box1"><h4>条码扫描</h4><input type="text" /></div>
		<div class="gray box2">
			<h4>套餐</h4>
			<input class="inp1" type="button" value="套餐选择" />
			<input class="inp2" type="button" value="套餐查看" />
			<input type="button" value="还原" />
		</div>
		<div class="box3" style="display: block;" id="boxkuangjing">
			<ul class="ulUp">
				<li><span onclick="getJingjia()">镜架</span></li>
				<li><span onclick="getJingpian()">镜片</span></li>
				<li><span onclick="getKjpeijian()">镜架配件</span></li>
				<li><span onclick="getTaiyangjing()">太阳镜</span></li>
				<li><span onclick="getHaocai()">耗材</span></li>
				<li><span onclick="getLaohuajing()">老花镜</span></li>
				<li><span onclick="getShiguang()">视光</span></li>
				<li><span onclick="getHuliye()">护理液</span></li>
				<li><span onclick="getPeijian()">配件</span></li>
			</ul>
			<ul class="ulDown">
				<li><span onclick="getZijia()">自架</span></li>
				<li><span onclick="getZipian()">自片</span></li>
				<li><span onclick="getZengpin()">赠品</span></li>
			</ul>
		</div>

		<div class="box33" style="display: none;" id="boxyinxing">
			<ul class="ulUn">
				<li><span onclick="getYinxing()">隐形</span></li>
				<li><span onclick="getHuliye()">护理液</span></li>
				<li><span onclick="getYinxingpj()">隐形配件</span></li>
				<li><span onclick="getJingjia()">镜架</span></li>
				<li><span onclick="getKjpeijian()">镜架配件</span></li>
				<li><span onclick="getTaiyangjing()">太阳镜</span></li>
				<li><span onclick="getHaocai()">耗材</span></li>
				<li><span onclick="getLaohuajing()">老花镜</span></li>
				<li><span onclick="getShiguang()">视光</span></li>
			</ul>
			<ul class="ulYin">
				<li><span onclick="getZengpin()">赠品</span></li>
			</ul>
		</div>

		<div class="box333" style="display: none;" id="boxfuliao">
			<ul class="ulUm">
				<li><span onclick="getJingjia()">镜架</span></li>
				<li><span onclick="getPeijian()">配件</span></li>
				<li><span onclick="getJingpian()">镜片</span></li>
				<li><span onclick="getYinxing()">隐形</span></li>
				<li><span onclick="getHuliye()">护理液</span></li>
				<li><span onclick="getTaiyangjing()">太阳镜</span></li>
				<li><span onclick="getHaocai()">耗材</span></li>
				<li><span onclick="getLaohuajing()">老花镜</span></li>
				<li><span onclick="getShiguang()">视光</span></li>
			</ul>
			<ul class="ulFu">
				<li><span onclick="getZengpin()">赠品</span></li>
			</ul>
		</div>

		<div class="gray box4" id="giveDev" style="display: block;">
			<h4>赠品快捷键</h4>
			<ul id="give">
			</ul>
		</div>
		<div class="gray box5">
			<h4>附加费用</h4>
			<select id="additionalName" onchange="getFujia()">
				<option value="">--请选择--</option>
				<option th:each="ls:${addlist}"
						th:text="${ls.additionName}"
						th:value="${ls.price}"></option>
			</select>
			<h4>加工要求</h4>
			<select id="processName" onchange="getJiagong()">
				<option value="">--请选择--</option>
				<option th:each="ls:${proList}"
						th:text="${ls.processName}"
						th:value="${ls.processName}"></option>
			</select>
		</div>
	</div>

	<!--结算下面右侧选择商品盒子-->
	<div class="Choose">
		<h4>选择商品</h4>
		<table class="cho_tabA" cellspacing="0" cellpadding="0">
			<thead>
			<tr>
				<th><input name="cho" type="checkbox" />选择</th>
				<th style="width: 300px;">商品名称</th>
				<th style="width: 50px;">单价</th>
				<th>可用库存</th>
				<th>数量</th>
				<th>原价合计</th>
				<th>折扣率</th>
				<th>最大折扣</th>
				<th>折扣金额</th>
				<th>优惠金额</th>
				<th>抹零金额</th>
				<th>应收金额</th>
				<th>商品描述</th>
				<th>删除</th>
			</tr>
			</thead>
			<tbody id="goods">
			</tbody>
		</table>
		<div class="cho_tabS_three">
			<table class="cho_tabB" cellspacing="0" cellpadding="0">
				<thead>
				<tr>
					<th>赠品</th>
					<th>删除</th>
				</tr>
				</thead>
				<tbody id="zengpin">
				</tbody>
			</table>

			<table class="cho_tabC" cellspacing="0" cellpadding="0">
				<thead>
				<tr>
					<th>附加费名称</th>
					<th>金额</th>
					<th width="80">数量</th>
					<th>合计</th>
					<th>删除</th>
				</tr>
				</thead>
				<tbody id="fujia">
				</tbody>
			</table>

			<table class="cho_tabB" cellspacing="0" cellpadding="0">
				<thead>
				<tr>
					<th>加工要求</th>
					<th>删除</th>
				</tr>
				</thead>
				<tbody id="jiagong">
				</tbody>
			</table>
		</div>
		<!--备注-->
		<table class="cho_beizhu" cellspacing="0" cellpadding="0">
			<tbody>
			<tr>
				<td class="tdBB1">销售备注</td>
				<td class="tdBB2"><textarea rows="2" id="remark" name="remark"></textarea></td>
			</tr>
			</tbody>
		</table>

	</div>

</div>
</form>
<div th:include="include :: footer"></div>
<script type="text/javascript" src="/js/appjs/storeSales/add.js"></script>
<script type="text/javascript" src="/js/appjs/storeSales/store.js"></script>
<script type="text/javascript">
    $().ready(function(){
        //sessionStorage.clear();
        $("#ula").empty();
        var lis="";
        lis =  "<li>原价金额：0.00</li>";
        lis += "<li>折扣金额：0.00</li>";
        lis += "<li>优惠金额：0.00</li>";
        lis += "<li>抹零金额：0.00</li>";
        lis += "<li>应收金额：0.00</li>";
        lis += "<li>实收金额：0.00</li>";
        $("#ula").append(lis)
        var now = new Date();
        var year = now.getFullYear(); //得到年份
        var month = now.getMonth();//得到月份
        var date = now.getDate();//得到日期
		var hour = now.getHours();//小时
        var minutes = now.getMinutes();//分钟
        var seconds = now.getSeconds();//秒
        month = month + 1;
        if (month < 10) month = "0" + month;
        if (date < 10) date = "0" + date;
        var time = "";
        time = year + "-" + month + "-" + date;
        //当前日期赋值给当前日期输入框中（jQuery easyUI）
        $('#mirrorTime').val(time);
        var myTime = "";
        myTime = year + "-" + month + "-" + date +" "+ hour + ":"+ minutes + ":"+ seconds;
        $("#yanguangTime").val(myTime);
        var salenames = $("input[name='saleName']").val();
        $("#saleName").find("[value="+salenames+"]").attr("selected",true);

    });

    function updatePerson(){
		$("#saleName").attr("disabled",false);
        //document.getElementById("salename").disabled="false"
	}

    laydate.render({
        elem: '#mirrorTime',
        type: 'date'
    });
    function getCheck(value){
        if (value == "框镜"){
            kuangjing.style="display: block";
            yinxing.style="display: none";
            fuliao.style="display:none"
            jianjinsg.style="display:none";
            zhongyong.style="display:none";
            jiaomosx.style="display:none";
            shijuexl.style="display:none";
            jiaomosxVST.style="display:none";
            jiaomosxCRT.style="display:none";
            rgp.style="display:none";
            yaopin.style="display:none";
            boxkuangjing.style="display:block";
            boxyinxing.style="display:none";
            boxfuliao.style="display:none";
        } else if (value == "隐形"){
            kuangjing.style="display: none";
            yinxing.style="display: block";
            fuliao.style="display:none"
            jianjinsg.style="display:none";
            zhongyong.style="display:none";
            jiaomosx.style="display:none";
            shijuexl.style="display:none";
            jiaomosxVST.style="display:none";
            jiaomosxCRT.style="display:none";
            rgp.style="display:none";
            yaopin.style="display:none";
            boxkuangjing.style="display:none";
            boxyinxing.style="display:block";
            boxfuliao.style="display:none";
        } else if (value == "辅料"){
            kuangjing.style="display: none";
            yinxing.style="display: none";
            fuliao.style="display:block"
            jianjinsg.style="display:none";
            zhongyong.style="display:none";
            jiaomosx.style="display:none";
            shijuexl.style="display:none";
            jiaomosxVST.style="display:none";
            jiaomosxCRT.style="display:none";
            rgp.style="display:none";
            yaopin.style="display:none";
            boxkuangjing.style="display:none";
            boxyinxing.style="display:none";
            boxfuliao.style="display:block";
        }
    }
    function getChufang(value) {
		if (value ==2){
		    tab1.style="display:''";
            tab11.style="display:''";
            tab111.style="display:''";
            tab1111.style="display:''";
            tab11111.style="display:''";
            tab111111.style="display:''";
            tab2.style="display:none";
            tab22.style="display:none";
		} else if (value ==1){
            tab1.style="display:none";
            tab11.style="display:none";
            tab111.style="display:none";
            tab1111.style="display:none";
            tab11111.style="display:none";
            tab111111.style="display:none";
            tab2.style="display:''";
            tab22.style="display:''";
		}
    }
    function getType(value) {
		if (value == 1){
            fuliao.style="display:block";
            kuangjing.style="display: none";
            yinxing.style="display: none";
            jianjinsg.style="display:none";
            zhongyong.style="display:none";
            jiaomosx.style="display:none";
            shijuexl.style="display:none";
            jiaomosxVST.style="display:none";
            jiaomosxCRT.style="display:none";
            rgp.style="display:none";
            yaopin.style="display:none";
		} else if (value == 2){
            fuliao.style="display:none";
            kuangjing.style="display: block";
            yinxing.style="display: none";
            jianjinsg.style="display:none";
            zhongyong.style="display:none";
            jiaomosx.style="display:none";
            shijuexl.style="display:none";
            jiaomosxVST.style="display:none";
            jiaomosxCRT.style="display:none";
            rgp.style="display:none";
            yaopin.style="display:none";
		} else if (value == 3){
            fuliao.style="display:none";
            kuangjing.style="display: none";
            yinxing.style="display: none";
            jianjinsg.style="display:block";
            zhongyong.style="display:none";
            jiaomosx.style="display:none";
            shijuexl.style="display:none";
            jiaomosxVST.style="display:none";
            jiaomosxCRT.style="display:none";
            rgp.style="display:none";
            yaopin.style="display:none";
		} else if (value == 4){
            fuliao.style="display:none";
            kuangjing.style="display: none";
            yinxing.style="display: none";
            jianjinsg.style="display:none";
            zhongyong.style="display:block";
            jiaomosx.style="display:none";
            shijuexl.style="display:none";
            jiaomosxVST.style="display:none";
            jiaomosxCRT.style="display:none";
            rgp.style="display:none";
            yaopin.style="display:none";
		} else if (value == 5){
            fuliao.style="display:none";
            kuangjing.style="display: none";
            yinxing.style="display: block";
            jianjinsg.style="display:none";
            zhongyong.style="display:none";
            jiaomosx.style="display:none";
            shijuexl.style="display:none";
            jiaomosxVST.style="display:none";
            jiaomosxCRT.style="display:none";
            rgp.style="display:none";
            yaopin.style="display:none";
		} else if (value == 6){
            fuliao.style="display:none";
            kuangjing.style="display: none";
            yinxing.style="display: none";
            jianjinsg.style="display:none";
            zhongyong.style="display:none";
            jiaomosx.style="display:block";
            shijuexl.style="display:none";
            jiaomosxVST.style="display:none";
            jiaomosxCRT.style="display:none";
            rgp.style="display:none";
            yaopin.style="display:none";
		} else if (value == 7){
            fuliao.style="display:none";
            kuangjing.style="display: none";
            yinxing.style="display: none";
            jianjinsg.style="display:none";
            zhongyong.style="display:none";
            jiaomosx.style="display:none";
            shijuexl.style="display:block";
            jiaomosxVST.style="display:none";
            jiaomosxCRT.style="display:none";
            rgp.style="display:none";
            yaopin.style="display:none";
		} else if (value == 8){
            fuliao.style="display:none";
            kuangjing.style="display: none";
            yinxing.style="display: none";
            jianjinsg.style="display:none";
            zhongyong.style="display:none";
            jiaomosx.style="display:none";
            shijuexl.style="display:none";
            jiaomosxVST.style="display:block";
            jiaomosxCRT.style="display:none";
            rgp.style="display:none";
            yaopin.style="display:none";
		} else if (value == 9){
            fuliao.style="display:none";
            kuangjing.style="display: none";
            yinxing.style="display: none";
            jianjinsg.style="display:none";
            zhongyong.style="display:none";
            jiaomosx.style="display:none";
            shijuexl.style="display:none";
            jiaomosxVST.style="display:none";
            jiaomosxCRT.style="display:block";
            rgp.style="display:none";
            yaopin.style="display:none";
		} else if (value == 10){
            fuliao.style="display:none";
            kuangjing.style="display: none";
            yinxing.style="display: none";
            jianjinsg.style="display:none";
            zhongyong.style="display:none";
            jiaomosx.style="display:none";
            shijuexl.style="display:none";
            jiaomosxVST.style="display:none";
            jiaomosxCRT.style="display:none";
            rgp.style="display:block";
            yaopin.style="display:none";
		} else if (value == 11){
            fuliao.style="display:none";
            kuangjing.style="display: none";
            yinxing.style="display: none";
            jianjinsg.style="display:none";
            zhongyong.style="display:none";
            jiaomosx.style="display:none";
            shijuexl.style="display:none";
            jiaomosxVST.style="display:none";
            jiaomosxCRT.style="display:none";
            rgp.style="display:none";
            yaopin.style="display:block";
		}
    }
    document.onkeydown = function(e){
        if((e||event).keyCode==13)
            getSelect();
    };

    function getSelect(){
        var cardMember = $("#cardMember").val();
        $.ajax({
            url : "/information/store/select",
            type : "post",
            data : {
                'cardMember' : cardMember
            },
            success : function(r) {
				$("#memberName").val(r.name);
				$("#memberTel").val(r.phone1);
				$("#memberSex").val(r.sexx);
				$("#memberAge").val(r.age);
				$("#memberType").val(r.cardType);
				$("#memberPoint").val(100);
				$("#memberSource").val(r.source);
                // if (r.code==0) {
                //     layer.msg(r.msg);
                //     reLoad();
                // }else{
                //     layer.msg(r.msg);
                // }
            }
        });
	}
	function check(a){
		if (a.checked == true){
            document.getElementById('disaa').disabled = true;
            outRecipel.style = "display:''";
		} else if (a.checked == false){
            document.getElementById('disaa').disabled = false;
            outRecipel.style = "display:none;";
		}
	}

    var arraystore=[]
	var arrayunit=[]
	var arraycount=[]
	var arrayjp=0
    var html ="";
    var price=0.00;
	function getJingjia(){
        var toIndex = layer.open({
            type : 2,
            title : '镜架',
            maxmin : true,
            shadeClose : false, // 点击遮罩关闭层
            area : [ '800px', '520px' ],
            content : "/information/store/jingjia/",// iframe的url
            cancel: function(index, layero){
                var rows = $(layero).find("iframe")[0].contentWindow.batchSelect();
                // var rows = sessionStorage.getItem("row");
                // alert(rows.length)
                for (var i=0;i<rows.length;i++){
                    html = "<tr><td><input name=\"cho\" type=\"checkbox\" /></td>";
                    html += "<td style=\"white-space: nowrap; text-overflow: ellipsis; overflow: hidden;\">"+rows[i].producName+"</td>";
                    html += "<input id='storeName' name='storeName' value="+rows[i].goodsName+" text='hidden'/>"
                    html += "<td>"+rows[i].retailPrice+"</td>";
                    html += "<td>3</td>";
                    html += "<td>1</td>";
                    html += "<td>"+rows[i].retailPrice+"</td>";
                    html += "<td>1.0000</td>";
                    html += "<td>0.000</td>";
                    html += "<td>0.00</td>";
                    html += "<td>0.00</td>";
                    html += "<td>0.00</td>";
                    html += "<td>"+rows[i].retailPrice+"</td>";
                    html += "<td>镜架</td>";
                    html += "<td><em onclick='del(this,\"" + rows[i].retailPrice + "\",\""+rows[i].producName+"\")'></em></td>";
                    html += "<input id='storeName' name='storeName' type='hidden' />"
                    html += "<input id='storeUnit' name='storeUnit' type='hidden' />"
                    html += "<input id='storeCount' name='storeCount' type='hidden' />"
                    html += "<input id='isJj' name='isJj' type='hidden' />"
                    html += "<input id='storeDescribe'name='storeDescribe' value='镜架' type='hidden' />"
                    $("#goods").append(html);
                    price = (parseFloat(price)+ parseFloat(rows[i].retailPrice)).toFixed(2);
                    //array.push({"producName":rows[i].producName,"retailPrice":rows[i].retailPrice,"storeCount":1});
                    arraystore.push(rows[i].goodsName);
                    arrayunit.push(rows[i].retailPrice);
                    arraycount.push(1)
					$("#isJj").val("有")
				}
                $("#storeName").val(arraystore);
                $("#storeUnit").val(arrayunit);
                $("#storeCount").val(arraycount);
                $("#ula").empty();
                var lis="";
                lis =  "<li>原价金额："+price+"</li>";
                lis += "<li>折扣金额：0.00</li>";
                lis += "<li>优惠金额：0.00</li>";
                lis += "<li>抹零金额：0.00</li>";
                lis += "<li>应收金额："+price+"</li>";
                lis += "<li>实收金额："+price+"</li>";
                $("#ula").append(lis)
				$("#amountMoney").val(price)

                //son_msg就是子页面中的msg数据
                //var son_msg = $(layero).find("iframe")[0].contentWindow.batchSelect();
            }
        });
        layer.full(toIndex)
	}

	function del(obj,prices,produName) {
        var tr=obj.parentNode.parentNode;//得到按钮[obj]的父元素[td]的父元素[tr]
        tr.parentNode.removeChild(tr);//从tr的父元素[tbody]移除tr
        price = (parseFloat(price)- parseFloat(prices)).toFixed(2)
        $("#ula").empty();
        var lis="";
        lis =  "<li>原价金额："+price+"</li>";
        lis += "<li>折扣金额：0.00</li>";
        lis += "<li>优惠金额：0.00</li>";
        lis += "<li>抹零金额：0.00</li>";
        lis += "<li>应收金额："+price+"</li>";
        lis += "<li>实收金额："+price+"</li>";
        $("#ula").append(lis);
        $("#amountMoney").val(price);
        arraystore.remove(produName);
        arrayunit.remove(prices);
        arraycount.remove(1);
        $("#storeName").val(arraystore);
        $("#storeUnit").val(arrayunit);
        $("#storeCount").val(arraycount);
    }

    function getJingpian(){
        var toIndex = layer.open({
            type : 2,
            title : '镜片',
            maxmin : true,
            shadeClose : false, // 点击遮罩关闭层
            area : [ '800px', '520px' ],
            content : "/information/store/jingpian/", // iframe的url
            cancel: function(index, layero){
                var rows = $(layero).find("iframe")[0].contentWindow.batchSelect();
                // var rows = sessionStorage.getItem("row");
                // alert(rows.length)
                arrayjp = rows.length;
                for (var i=0;i<rows.length;i++){
                    html = "<tr><td><input name=\"cho\" type=\"checkbox\" /></td>";
                    html += "<td style=\"white-space: nowrap; text-overflow: ellipsis; overflow: hidden;\">"+rows[i].goodsName+"</td>";
                    html += "<td>"+rows[i].retailPrice+"</td>";
                    html += "<td>3</td>";
                    html += "<td>1</td>";
                    html += "<td>"+rows[i].retailPrice+"</td>";
                    html += "<td>1.0000</td>";
                    html += "<td>0.000</td>";
                    html += "<td>0.00</td>";
                    html += "<td>0.00</td>";
                    html += "<td>0.00</td>";
                    html += "<td>"+rows[i].retailPrice+"</td>";
                    html += "<td>镜片</td>";
                    html += "<td><em onclick='del(this,\"" + rows[i].retailPrice + "\",\""+rows[i].goodsName+"\")'></em></td>";
                    html += "<input id='storeName'name='storeName' type='hidden' />"
                    html += "<input id='storeUnit'name='storeUnit' type='hidden' />"
                    html += "<input id='storeCount'name='storeCount' type='hidden' />"
                    html += "<input id='isJp'name='isJp' type='hidden' />"
                    html += "<input id='storeDescribe'name='storeDescribe' value='镜片' type='hidden' />"
                    $("#goods").append(html);
                    price = (parseFloat(price)+ parseFloat(rows[i].retailPrice)).toFixed(2);
                    //array.push({"producName":rows[i].producName,"retailPrice":rows[i].retailPrice,"storeCount":1});
                    arraystore.push(rows[i].goodsName);
                    arrayunit.push(rows[i].retailPrice);
                    arraycount.push(1);
                }
                $("#isJp").val(arrayjp);
                $("#storeName").val(arraystore);
                $("#storeUnit").val(arrayunit);
                $("#storeCount").val(arraycount);
                $("#ula").empty();
                var lis="";
                lis =  "<li>原价金额："+price+"</li>";
                lis += "<li>折扣金额：0.00</li>";
                lis += "<li>优惠金额：0.00</li>";
                lis += "<li>抹零金额：0.00</li>";
                lis += "<li>应收金额："+price+"</li>";
                lis += "<li>实收金额："+price+"</li>";
                $("#ula").append(lis)
                $("#amountMoney").val(price)
                //son_msg就是子页面中的msg数据
                //var son_msg = $(layero).find("iframe")[0].contentWindow.batchSelect();
            }
        });
        layer.full(toIndex)
    }
    function getMemberAdd(){
        var toIndex = layer.open({
            type : 2,
            title : '增加',
            maxmin : true,
            shadeClose : false, // 点击遮罩关闭层
            area : [ '800px', '520px' ],
            content : "/information/member/add/" // iframe的url
        });
        layer.full(toIndex)
    }
    function getMemberEdit(){
	    var id = $("#memberId").val();
        var toIndex = layer.open({
            type : 2,
            title : '编辑',
            maxmin : true,
            shadeClose : false, // 点击遮罩关闭层
            area : [ '800px', '520px' ],
            content : "/information/member/edit/"+ id  // iframe的url
        });
        layer.full(toIndex)
    }
    function getMemberDetail(){
        var id = $("#memberId").val();
        var toIndex = layer.open({
            type : 2,
            title : '详情',
            maxmin : true,
            shadeClose : false, // 点击遮罩关闭层
            area : [ '800px', '520px' ],
            content : "/information/highmember/detail/" + id // iframe的url
        });
        layer.full(toIndex)
	}
    var addhtml = "";
	var prce=0;
	var addinal=[];
	function getFujia(){
        var options=$("#additionalName option:selected")
		if (options.val() == ''){
            return
		}
        var pe = 1;
        prce = pe;
        price =(parseFloat(price)+ parseFloat(options.val())).toFixed(2);
        $("#ula").empty();
        var lis="";
        lis =  "<li>原价金额："+price+"</li>";
        lis += "<li>折扣金额：0.00</li>";
        lis += "<li>优惠金额：0.00</li>";
        lis += "<li>抹零金额：0.00</li>";
        lis += "<li>应收金额："+price+"</li>";
        lis += "<li>实收金额："+price+"</li>";
        $("#ula").append(lis)
        $("#amountMoney").val(price)
		addhtml = "<tr><td>"+options.text()+"</td>";
		addhtml += "<td>"+options.val()+"</td>";
		addhtml += "<td><input type=\"text\" id='prival' value='1' onkeyup=\"sum("+options.val()+")\"/></td>";
		addhtml += "<td id='sumprice'>"+options.val()+"</td>";
		addhtml += "<td><em onclick='delss(this,\"" + options.val() + "\",\"" + options.text() + "\")'></em></td>";
		addhtml += "</tr>";
		addhtml += "<input id='additionalCost' name='additionalCost' type='hidden'/>"
		$("#fujia").append(addhtml);
        addinal.push(options.text());
        $("#additionalCost").val(addinal);
	}
    function sum(obj){
        var privaul = $("#prival").val();
        prce = privaul;
        var sumprices = (parseFloat(privaul) * parseFloat(obj)).toFixed(2)
        sumprice.innerText = sumprices;
        //$("#sumprice").val(sumprices);
		price = sumprices;
        //price =(parseFloat(price)+ parseFloat(sumprices)).toFixed(2);
        $("#ula").empty();
        var lis="";
        lis =  "<li>原价金额："+price+"</li>";
        lis += "<li>折扣金额：0.00</li>";
        lis += "<li>优惠金额：0.00</li>";
        lis += "<li>抹零金额：0.00</li>";
        lis += "<li>应收金额："+price+"</li>";
        lis += "<li>实收金额："+price+"</li>";
        $("#ula").append(lis)
        $("#amountMoney").val(price)
    }
    function delss(obj,privals,addinalname) {
        var tr=obj.parentNode.parentNode;//得到按钮[obj]的父元素[td]的父元素[tr]
        tr.parentNode.removeChild(tr);//从tr的父元素[tbody]移除tr
		//var dd = $("#prival").val();
		//alert(prce);
		var dsf = (parseFloat(prce) * parseFloat(privals)).toFixed(2);
		price = (parseFloat(price) - parseFloat(dsf)).toFixed(2);
        $("#ula").empty();
        var lis="";
        lis =  "<li>原价金额："+price+"</li>";
        lis += "<li>折扣金额：0.00</li>";
        lis += "<li>优惠金额：0.00</li>";
        lis += "<li>抹零金额：0.00</li>";
        lis += "<li>应收金额："+price+"</li>";
        lis += "<li>实收金额："+price+"</li>";
        $("#ula").append(lis)
        $("#amountMoney").val(price)
        addinal.remove(addinalname);
        $("#additionalCost").val(addinal);
    }
    //加工要求
	var jiagonghtml="";
	var ask=[];
	function getJiagong() {
        var options=$("#processName option:selected")
		var jianame = options.text();
        jiagonghtml = "<tr>";
        jiagonghtml += "<td><input type=\"text\" value="+options.text()+"></td>";
        jiagonghtml += "<td><em onclick='getDeljia(this,\"" + jianame + "\")'></em></td>";
        jiagonghtml += "</tr>";
        jiagonghtml += "<input name=\"processAsk\"id=\"processAsk\" type=\"hidden\" />"
        $("#jiagong").append(jiagonghtml);
        ask.push(options.text())
        $("#processAsk").val(ask);
    }
    Array.prototype.remove = function(val) {
        var index = this.indexOf(val);
        if (index > -1) {
            this.splice(index, 1);
        }
    };
    function getDeljia(obj,jianame) {
        var tr=obj.parentNode.parentNode;//得到按钮[obj]的父元素[td]的父元素[tr]
        tr.parentNode.removeChild(tr);//从tr的父元素[tbody]移除tr
		ask.remove(jianame)
        $("#processAsk").val(ask);
	}
    function getChangeValue(){
        var molingMoney = $("#molingMoney").val();
        if (parseInt(molingMoney) >= parseInt(price)){
            $("#molingMoney").val(0.00);
            return alert("抹零金额不能大于实收金额");
        }
        price = (parseFloat(price) - parseFloat(molingMoney)).toFixed(2);
        $("#ula").empty();
        var lis="";
        lis =  "<li>原价金额："+price+"</li>";
        lis += "<li>折扣金额：0.00</li>";
        lis += "<li>优惠金额：0.00</li>";
        lis += "<li>抹零金额：0.00</li>";
        lis += "<li>应收金额："+price+"</li>";
        lis += "<li>实收金额："+price+"</li>";
        $("#ula").append(lis)
        $("#amountMoney").val(price)
        //$("#amountMoney").val(price);
    }
</script>
<script th:inline="javascript">
    $().ready(function(){
        var name = $("#memname").val();
        //赠品
        var giveList = [[${giveawayDOList}]];
        if (giveList.length >0){
            giveDev.style = "display:block;"
		} else {
            giveDev.style = "display:none;"
		}
		//附加费用
		var addlist = [[${addlist}]];
		//处方
        var list = [[${userDOList}]];
        var len = list.length;
        var trs = 7-len;
		var html="";
            for (var i = 0; i < list.length; i++) {
                html = "<tr><td style=\"width:25%;\">"+list[i].name+"</td>";
                html += "<td style=\"width:25%;\">"+name+"</td>";
                html += "<td>2021-06-05 14:28</td></tr>";
                $("#tbodys").append(html);
            }
            var newli = "";
            for (var t=0;t<giveList.length;t++){
                newli = "<li><span onclick=getgive('"+giveList[t].giveName+"')>"+giveList[t].giveJc+"</span></li>";
                $("#give").append(newli);
			}
    });
    //赠品
    var newGive=""
	var give = [];
    function getgive(obj) {
        var ss = obj;
        newGive = "<tr><td>"+obj+"</td>";
        newGive += "<td><em onclick='dels(this,\"" + ss + "\")'></em></td>";
        newGive += "</tr>";
        newGive += "<input id='giveName' name='giveName' type='hidden' />";
        $("#zengpin").append(newGive);
        give.push(obj);
		$("#giveName").val(give);
    }
    function dels(obj,str) {
        var tr=obj.parentNode.parentNode;//得到按钮[obj]的父元素[td]的父元素[tr]
        tr.parentNode.removeChild(tr);//从tr的父元素[tbody]移除tr
		give.remove(str)
        $("#giveName").val(give);
    }
</script>
</body>
</html>
