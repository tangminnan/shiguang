<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="keywords" content=""/>
	<meta name="description" content=""/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
	<title>品种添加</title>
	<link rel="stylesheet" href="/css/css.css" type="text/css">
	<script type="text/javascript" src="/js/jquery-1.11.3.min.js"></script>
	<script type="text/javascript" src="/js/jquery.SuperSlide.2.1.1.js"></script>
	<style type="text/css">
		.fixed-table-pagination{height: 60px;}
		.pull-left{float: left; margin-top: 10px;margin-bottom: 10px;}
		.pull-right{float: right; margin-top: 10px;margin-bottom: 10px;}

		.pagination > li {
			display: inline;
			font-size: 12px;
		}

		.pagination-info {
			line-height: 34px;
			margin-right: 5px;
		}
		.btn-group {
			position: relative;
			display: inline-block;
			vertical-align: middle;
		}
		.pagination {
			display: inline-block;
			padding-left: 0px;
			border-radius: 4px;
		}

		.pagination>li>a, .pagination>li>span {
			position: relative;
			float: left;
			padding: 6px 12px;
			margin-left: -1px;
			line-height: 1.42857143;
			color: #337ab7;
			text-decoration: none;
			background-color: #fff;
			border: 1px solid #ddd;
		}

		.pagination>li>a, .pagination>li>span {
			background-color: #FFFFFF;
			border: 1px solid #DDDDDD;
			color: inherit;
			float: left;
			line-height: 1.42857;
			margin-left: -1px;
			padding: 4px 10px;
			position: relative;
			text-decoration: none;
		}

		.pagination>.disabled>a, .pagination>.disabled>a:focus, .pagination>.disabled>a:hover, .pagination>.disabled>span, .pagination>.disabled>span:focus, .pagination>.disabled>span:hover {
			color: #777;
			cursor: not-allowed;
			background-color: #fff;
			border-color: #ddd;
		}

		.fixed-table-pagination .pagination a {
			padding: 6px 12px;
			line-height: 1.428571429;
		}

		.pagination>li:first-child>a, .pagination>li:first-child>span {
			margin-left: 0;
			border-top-left-radius: 4px;
			border-bottom-left-radius: 4px;
		}

		.fixed-table-pagination li.disabled a {
			pointer-events: none;
			cursor: default;
		}



		.btn-default {
			color: #333;
			background-color: #fff;
			border-color: #ccc;
		}

		.btn-default {
			background-color: #c2c2c2;
			border-color: #c2c2c2;
			color: #FFFFFF;
		}

		.btn-outline {
			color: inherit;
			background-color: transparent;
			-webkit-transition: all .5s;
			transition: all .5s;
			border: 1px solid #c2c2c2;
			padding: 5px 10px;
			outline: none;
		}

		.pagination>.active>a, .pagination>.active>span, .pagination>.active>a:hover, .pagination>.active>span:hover, .pagination>.active>a:focus, .pagination>.active>span:focus {
			background-color: #f4f4f4;
			border-color: #DDDDDD;
			color: inherit;
			cursor: default;
			z-index: 2;
		}


		.dropdown-menu {
			position: absolute;
			top: 100%;
			left: 0;
			z-index: 1000;
			display: none;
			float: left;
			min-width: 160px;
			padding: 5px 0;
			margin: 2px 0 0;
			font-size: 14px;
			text-align: left;
			list-style: none;
			background-color: #fff;
			-webkit-background-clip: padding-box;
			background-clip: padding-box;
			border: 1px solid #ccc;
			border: 1px solid rgba(0,0,0,.15);
			border-radius: 4px;
			-webkit-box-shadow: 0 6px 12px rgba(0,0,0,.175);
			box-shadow: 0 6px 12px rgba(0,0,0,.175);
		}

		.dropdown-menu {
			border: medium none;
			display: none;
			float: left;
			font-size: 12px;
			left: 0;
			list-style: none outside none;
			padding: 0;
			position: absolute;
			text-shadow: none;
			top: 100%;
			z-index: 1000;
			border-radius: 0;
			box-shadow: 0 0 3px rgba(86, 96, 117, 0.3);
		}

		.dropup .dropdown-menu, .navbar-fixed-bottom .dropdown .dropdown-menu {
			top: auto;
			bottom: 100%;
			margin-bottom: 2px;
		}
		.ibox .open>.dropdown-menu {
			left: auto;
			right: 0;
		}
		.open>.dropdown-menu {
			display: block;
		}

		.dropdown-menu>li>a {
			display: block;
			padding: 3px 20px;
			clear: both;
			font-weight: 400;
			line-height: 1.42857143;
			color: #333;
			white-space: nowrap;
		}

		.dropdown-menu>li>a {
			border-radius: 3px;
			color: inherit;
			line-height: 25px;
			margin: 4px;
			text-align: left;
			font-weight: normal;
		}
		.dropdown-menu>.active>a, .dropdown-menu>.active>a:focus, .dropdown-menu>.active>a:hover {
			color: #fff;
			text-decoration: none;
			background-color: #337ab7;
			outline: 0;
		}
	</style>
</head>
<body>
<!--查询条件-->
<div class="m40 tabS msgBox">
	<table border="0" cellspacing="0" cellpadding="0">
		<tr>
			<td>商品类型：</td>
			<td>
				<select id="goodsid" name="goodsid" onchange="selectgoods()" style="width: 80%">
					<option value="">--请选择--</option>
					<option th:each="ls:${goodsDOList}"
							th:text="${ls.goodsname}"
							th:value="${ls.goodsid}"></option>
				</select>
				<div id="jp" style="display: none">
					<label class="radio-inline">
						<input type="radio" name="classtype"  value="1" checked /> 成品片
					</label>
					<label class="radio-inline">
						<input type="radio" name="classtype" value="2" /> 订做片
					</label>
				</div>
				<input type="hidden" id="classtype" value="" />

			</td>
			<td>制造商：</td>
			<td>
				<input id="mfrsname" name="mfrsname" type="text" readonly/>
				<input type="button" class="XZ-btn" value="选择" onclick="choiceMfrs()"/>
			</td>
			<td>商品品种：</td>
			<td>
				<input id="brandname" name="brandname" type="text" readonly style="background-color: #e4e4e4" />
				<input type="button" class="XZ-btn" value="选择" onclick="choiceBrand()"/>
			</td>
		</tr>
	</table>
	<!--保存/清空-->
	<div class="BQ-btn">
		<input type="button" value="查询" onclick="reLoad()"/>
		<input type="button" class="empty" value="清空" onclick="clearText()"/>
	</div>
	<table id="exampleTable" data-mobile-responsive="true"></table>
</div>
<div th:include="include :: footer"></div>
<script type="text/javascript" src="/js/appjs/retailprice/retailprice/getBrandGoods.js"></script>
<script type="text/javascript">
    function selectgoods() {
        var goodsid = $("#goodsid option:selected").val();
        if (goodsid == ""){
            jp.style = "display: none";
        }if (goodsid == 1){
            jp.style = "display: none";
        }else if (goodsid == 2){
            jp.style = "display: none";
        }else if (goodsid == 3){
            $("#classtype").val("") ;
            jp.style = "display: block";
        }else if (goodsid == 4){
            $("#classtype").val("") ;
            jp.style = "display: block";
        }else if (goodsid == 5){
            jp.style = "display: none";
        }else if (goodsid == 6){
            jp.style = "display: none";
        }else if (goodsid == 7){
            jp.style = "display: none";
        }else if (goodsid == 8){
            jp.style = "display: none";
        }else if (goodsid == 9){
            jp.style = "display: none";
        }
    }
    <!--选择制造商-->
    function choiceMfrs() {
        var goodsid = $("#goodsid").val();
        if (goodsid == "") {
            layer.alert("请选择商品类型！");
        } else {
            var toIndex = layer.open({
                type: 2,
                title: '制造商',
                maxmin: true,
                shadeClose: false, // 点击遮罩关闭层
                area: ['800px', '520px'],
                content: "/product/produca/findmfrs/" + goodsid,// iframe的url
                cancel: function (index, layero) {
                    var rows = $(layero).find("iframe")[0].contentWindow.batchSelect();
                    for (var i = 0; i < rows.length; i++) {
                        $("#mfrsname").val(rows[i].mfrsname);
                        $("#mfrsid").val(rows[i].mfrsnum);
                        // alert(rows[i].mfrsnum)
                        // $("#mfrsNames").val(rows[i].mfrsname);
                    }
                }
            });
            layer.full(toIndex);
        }
    }
    function choiceBrand() {
        var goodsid = $("#goodsid").val();
        var mfrsname = $("#mfrsname").val();
        if (mfrsname == "") {
            layer.alert("请选择制造商！");
        } else {
            //选择镜架
            var toIndex = layer.open({
                type: 2,
                title: '商品品种',
                maxmin: true,
                shadeClose: false, // 点击遮罩关闭层
                area: ['800px', '520px'],
                content: "/kucun/stock/findbrand/" + mfrsname+"/"+goodsid,// iframe的url
                cancel: function (index, layero) {
                    var rows = $(layero).find("iframe")[0].contentWindow.batchSelect();
                    for (var i = 0; i < rows.length; i++) {
                        $("#brandname").val(rows[i].brandname);
                        $("#brandnum").val(rows[i].brandnum);
                        // $("#brandNames").val(rows[i].brandname);
                    }
                }
            });
            layer.full(toIndex);
        }
    }
    function reLoad() {
        var goodsid=$("#goodsid").val();
        if (goodsid== ""){
            $("#classtype").val("") ;
        }else {
            $("#classtype").val("1") ;
        }
        if (goodsid == 3 || goodsid == 4) {
            $("#classtype").val($("input[name='classtype']:checked").val());
        }
            if (goodsid=="") {
                layer.alert("请选择商品类别！");
        	}else {
                $('#exampleTable').bootstrapTable('refresh');
                $('#exampleTable')
                    .bootstrapTable(
                        {
                            method: 'get', // 服务器数据的请求方式 get or post
                            url: '/retailprice/retailprice/brandslist', // 服务器数据的加载地址
                            //	showRefresh : true,
                            //	showToggle : true,
                            //	showColumns : true,
                            iconSize: 'outline',
                            toolbar: '#exampleToolbar',
                            striped: true, // 设置为true会有隔行变色效果
                            dataType: "json", // 服务器返回的数据类型
                            pagination: true, // 设置为true会在底部显示分页条
                            // queryParamsType : "limit",
                            // //设置为limit则会发送符合RESTFull格式的参数
                            singleSelect: false, // 设置为true将禁止多选
                            // contentType : "application/x-www-form-urlencoded",
                            // //发送到服务器的数据编码类型
                            pageSize: 10, // 如果设置了分页，每页数据条数
                            pageNumber: 1, // 如果设置了分布，首页页码
                            // pageList:[10,25,50,100,500,1200,1500,2000],
                            smartDisplay: false,
                            //search : true, // 是否显示搜索框
                            showColumns: false, // 是否显示内容下拉框（选择显示的列）
                            sidePagination: "server", // 设置在哪里进行分页，可选值为"client" 或者 "server"
                            queryParams: function (params) {
                                return {
                                    //说明：传入后台的参数包括offset开始索引，limit步长，sort排序列，order：desc或者,以及所有列的键值对
                                    limit: params.limit,
                                    offset: params.offset,
                                    mfrsname: $("#mfrsname").val(),
                                    brandname: $("#brandname").val(),
                                    goodsid: $("#goodsid").val(),
                                    classtype : $("#classtype").val()
                                };
                            },
                            columns: [
                                {
                                    checkbox: true
                                },
                                {
                                    title: '品种代码',
                                    align: 'center',
                                    formatter: function (value, row, index) {
                                        return row.goodsid + "." + row.mfrsid + "." + row.brandnum
                                    }
                                },
                                {
                                    field: 'brandname',
                                    title: '品种名称'
                                },
                                {
                                    field: 'mfrsname',
                                    title: '所属制造商'
                                },
                                {
                                    field: 'retailPrice',
                                    title: '标准零售价'
                                },

                            ]
                        });
            }
    }
    function clearText() {
        var controls = document.getElementsByTagName('input');
        for (var i = 0; i < controls.length; i++) {
            if (controls[i].type == 'text') {
                controls[i].value = '';
            }
        }
    }
</script>
</body>
</html>
