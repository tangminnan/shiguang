<!DOCTYPE html>
<html>
<meta charset="utf-8">
<head th:include="include :: header"></head>
<body class="gray-bg">
	<div class="wrapper wrapper-content ">
		<div class="row">
			<div class="col-sm-12">
				<div class="ibox float-e-margins">
					<div class="ibox-content">
						<form class="form-horizontal m-t" id="signupForm">
						<input id="id" name="id" th:value="${member.id}"  type="hidden">
							<input id="companyId" name="companyId" th:value="${member.companyId}"  type="hidden">
							<input id="memberOption" name="memberOption" th:value="${member.memberOption}"  type="hidden">
							<div class="form-group">	
								<label class="col-sm-3 control-label">顾客姓名：</label>
								<div class="col-sm-8">
									<input id="name" name="name" th:value="${member.name}"  type="text">
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-3 control-label">会员选项：</label>
								<div class="col-sm-8">
									<label class="radio-inline"> <input type="radio"
																		th:field="*{member.memberOption}" name="memberOption" value="0" disabled/> 普通会员
									</label>
									<label class="radio-inline"> <input type="radio"
																		th:field="*{member.memberOption}" name="memberOption" value="1" disabled/> 自动生成
									</label>
								</div>
							</div>
														<div class="form-group">	
								<label class="col-sm-3 control-label">会员卡号：</label>
								<div class="col-sm-8">
									<input id="cardNumber" name="cardNumber" th:value="${member.cardNumber}" type="text" disabled>
								</div>
							</div>
														<div class="form-group">	
								<label class="col-sm-3 control-label">顾客性别：</label>
								<div class="col-sm-8">
									<label class="radio-inline"> <input type="radio"
																		th:field="*{member.sex}" name="sex" value="0" /> 男
									</label>
									<label class="radio-inline"> <input type="radio"
																		th:field="*{member.sex}" name="sex" value="1" /> 女
									</label>
								</div>
							</div>
														<div class="form-group">	
								<label class="col-sm-3 control-label">出生日期：</label>
								<div class="col-sm-8">
									<input id="birthdayYear" name="birthdayYear" th:value="${member.birthdayYear}" style="width: 20%" type="text" >
									<input id="birthdayMonth" name="birthdayMonth" th:value="${member.birthdayMonth}" style="width: 10%" type="text" >
									<input id="birthdayDay" name="birthdayDay" th:value="${member.birthdayDay}" style="width: 10%" type="text" >
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-3 control-label">证件类型：</label>
								<div class="col-sm-8">
									<select class="form-control" name="identityType" id="identityType" th:value="${member.identityType}" class="form-control">
										<option value="">请选择</option>
										<option value="居民身份证">居民身份证</option>
										<option value="机动车驾驶证">机动车驾驶证</option>
										<option value="台湾居民来往大陆通行证">台湾居民来往大陆通行证</option>
										<option value="中国人民解放军军人证">中国人民解放军军人证</option>
										<option value="中国人民武装警察身份证">中国人民武装警察身份证</option>
										<option value="护照">护照</option>
										<option value="户口本">户口本</option>
									</select>
									<input id="identityTypes" name="identityTypes" th:value="${member.identityType}" class="form-control" type="hidden">
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-3 control-label">联系人证件号码：</label>
								<div class="col-sm-8">
									<input id="identityId" name="identityId" th:value="${member.identityId}" class="form-control" type="text">
								</div>
							</div>
														<div class="form-group">	
								<label class="col-sm-3 control-label">年龄：</label>
								<div class="col-sm-8">
									<input id="age" name="age" th:value="${member.age}" type="text" readonly>
								</div>
							</div>
														<div class="form-group">	
								<label class="col-sm-3 control-label">联系电话1：</label>
								<div class="col-sm-8">
									<input id="phone1" name="phone1" th:value="${member.phone1}"  type="text">
								</div>
							</div>
														<div class="form-group">	
								<label class="col-sm-3 control-label">联系电话2：</label>
								<div class="col-sm-8">
									<input id="phone2" name="phone2" th:value="${member.phone2}"  type="text">
								</div>
							</div>
														<div class="form-group">	
								<label class="col-sm-3 control-label">联系电话3：</label>
								<div class="col-sm-8">
									<input id="phone3" name="phone3" th:value="${member.phone3}"  type="text">
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-3 control-label">地区(3级)：</label>
								<div class="col-sm-8 form-inline" data-toggle="distpicker">
									<select id="eprovinceName" name="provinceName" class="form-control chosen-select" ></select>
									<select id="ecityName"  name="cityName" class="form-control chosen-select" ></select>
									<select id="eareaName" name="areaName" class="form-control chosen-select" ></select>
									<span style="color: red">*</span>
								</div>
							</div>
							<input id="provincecode" name="provincecode" th:value="${member.provinceCode}" class="form-control" type="hidden">
							<input id="provincename" name="provincename" th:value="${member.provinceName}" class="form-control" type="hidden">
							<input id="citycode" name="citycode" th:value="${member.cityCode}" class="form-control" type="hidden">
							<input id="cityname" name="cityname" th:value="${member.cityName}" class="form-control" type="hidden">
							<input id="areacode" name="areacode" th:value="${member.areaCode}" class="form-control" type="hidden">
							<input id="areaname" name="areaname" th:value="${member.areaName}" class="form-control" type="hidden">
														<div class="form-group">	
								<label class="col-sm-3 control-label">会员卡类型：</label>
								<div class="col-sm-8">
									<select name="cardType" id="cardType" th:value="${member.cardType}" class="form-control" data-actions-box="false" data-size="5">
										<option th:each="ls:${cardTypeDOList}"
												th:text="${ls.cardName}"
												th:value="${ls.cardName}"></option>
									</select>
									<input id="cardTypes" name="cardTypes" th:value="${member.cardType}" class="form-control" type="hidden">
								</div>
							</div>
							<!--<div class="form-group">-->
								<!--<div class="col-sm-8 col-sm-offset-3">-->
									<!--<button type="submit" class="btn btn-primary">保存</button>-->
								<!--</div>-->
							<!--</div>-->
						<!--</form>-->
						<h2 style="color: red;text-align:center">以下为可选项</h2>
														<!--<div class="form-group">-->
								<!--<label class="col-sm-3 control-label">主卡：</label>-->
								<!--<div class="col-sm-8">-->
									<!--<input id="masterCard" name="masterCard" th:value="${member.masterCard}"  type="text">-->
								<!--</div>-->
							<!--</div>-->
														<!--<div class="form-group">-->
								<!--<label class="col-sm-3 control-label">姓名：</label>-->
								<!--<div class="col-sm-8">-->
									<!--<input id="minorName" name="minorName" th:value="${member.minorName}"  type="text">-->
								<!--</div>-->
							<!--</div>-->
														<div class="form-group">
								<label class="col-sm-3 control-label">人群分类：</label>
								<div class="col-sm-8">
									<select name="crowdType" id="crowdType" class="form-control" th:value="${member.crowdType}" data-actions-box="false" data-size="5">
										<option></option>
										<option th:each="ls:${personSortDOList}"
												th:text="${ls.crowdName}"
												th:value="${ls.crowdName}"></option>
									</select>
									<input id="crowdTypes" name="crowdTypes" th:value="${member.crowdType}" type="hidden">
								</div>
							</div>
														<!--<div class="form-group">	-->
								<!--<label class="col-sm-3 control-label">专属客服：</label>-->
								<!--<div class="col-sm-8">-->
									<!--<input id="exclusiveCustomer" name="exclusiveCustomer" th:value="${member.exclusiveCustomer}"  type="text">-->
								<!--</div>-->
							<!--</div>-->
														<!--<div class="form-group">	-->
								<!--<label class="col-sm-3 control-label">专属客服id：</label>-->
								<!--<div class="col-sm-8">-->
									<!--<input id="exclusiveCustomerId" name="exclusiveCustomerId" th:value="${member.exclusiveCustomerId}" class="form-control" type="text">-->
								<!--</div>-->
							<!--</div>-->
														<div class="form-group">
								<label class="col-sm-3 control-label">职业：</label>
								<div class="col-sm-8">
									<select name="vocation" id="vocation" class="form-control" th:value="${member.vocation}" data-actions-box="false" data-size="5">
										<option></option>
										<option th:each="ls:${vocationDOList}"
												th:text="${ls.vocationName}"
												th:value="${ls.vocationName}"></option>
									</select>
									<input id="vocations" name="vocations" th:value="${member.vocation}" class="form-control" type="hidden">
								</div>
							</div>
														<div class="form-group">
								<label class="col-sm-3 control-label">学校：</label>
								<div class="col-sm-8">
									<input id="school" name="school" th:value="${member.school}" class="form-control" type="text">
								</div>
							</div>
														<div class="form-group">
								<label class="col-sm-3 control-label">QQ号码：</label>
								<div class="col-sm-8">
									<input id="qqNumber" name="qqNumber" th:value="${member.qqNumber}" class="form-control" type="text">
								</div>
							</div>
														<div class="form-group">
								<label class="col-sm-3 control-label">E-Mail：</label>
								<div class="col-sm-8">
									<input id="email" name="email" th:value="${member.email}" class="form-control" type="text">
								</div>
							</div>
														<div class="form-group">
								<label class="col-sm-3 control-label">详细地址：</label>
								<div class="col-sm-8">
									<input id="address" name="address" th:value="${member.address}" class="form-control" type="text">
								</div>
							</div>
														<div class="form-group">
								<label class="col-sm-3 control-label">邮编：</label>
								<div class="col-sm-8">
									<input id="postalCode" name="postalCode" th:value="${member.postalCode}"  type="text">
								</div>
							</div>
														<div class="form-group">
								<label class="col-sm-3 control-label">兴趣爱好：</label>
								<div class="col-sm-8">
									<select name="interests" id="interests" multiple class="selectpicker form-control" th:value="${member.interest}" onchange="changeInterest()" >
										<option th:each="ls:${interestDOList}"
												th:text="${ls.imterestName}"
												th:value="${ls.imterestName}"></option>
									</select>
									<input id="interest" name="interest" th:value="${member.interest}" class="form-control" type="hidden">
								</div>
							</div>
														<div class="form-group">
								<label class="col-sm-3 control-label">来源：</label>
								<div class="col-sm-8">
									<select name="source" id="source" class="form-control" th:value="${member.source}" data-actions-box="false" data-size="5">
										<option></option>
										<option th:each="ls:${sourceDOList}"
												th:text="${ls.sourceName}"
												th:value="${ls.sourceName}"></option>
									</select>
									<input id="sources" name="sources" th:value="${member.source}"  type="hidden">
								</div>
							</div>
														<!--<div class="form-group">	-->
								<!--<label class="col-sm-3 control-label">积分密码：</label>-->
								<!--<div class="col-sm-8">-->
									<!--<input id="integralPasd" name="integralPasd" th:value="${member.integralPasd}" class="form-control" type="text">-->
								<!--</div>-->
							<!--</div>-->
														<div class="form-group">
								<label class="col-sm-3 control-label">备注：</label>
								<div class="col-sm-8">
									<input id="remark" name="remark" th:value="${member.remark}" class="form-control" type="text">
								</div>
							</div>
														<div class="form-group">
								<label class="col-sm-3 control-label">注册时间：</label>
								<div class="col-sm-8">
									<input id="registerTime" name="registerTime" th:value="${member.createTime}"  type="text" disabled>
								</div>
							</div>
																					<div class="form-group">
								<div class="col-sm-8 col-sm-offset-3">
									<button type="submit" class="btn btn-primary">保存</button>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
	</div>
	</div>
	<div th:include="include::footer"></div>
	<script type="text/javascript" src="/js/appjs/member/edit.js">
	</script>
	<script type="text/javascript">

        $().ready(function(){
            var provincename = $("input[name='provincename']").val();
            var cityname = $("input[name='cityname']").val();
            var areaname = $("input[name='areaname']").val();
            $("#eprovinceName").find("[value="+provincename+"]").attr("selected",true);
            $("#eprovinceName").trigger("change");
            $("#ecityName").find("[value="+cityname+"]").attr("selected",true);
            $("#ecityName").trigger("change");
            $("#eareaName").find("[value="+areaname+"]").attr("selected",true);

            var cardTypes = $("input[name='cardTypes']").val();
            $("#cardType").find("[value="+cardTypes+"]").attr("selected",true);

            var crowdTypes = $("input[name='crowdTypes']").val();
            $("#crowdType").find("[value='"+crowdTypes+"']").attr("selected",true);

            var identityTypes = $("input[name='identityTypes']").val();
            $("#identityType").find("[value='"+identityTypes+"']").attr("selected",true);
            //
            var vocations = $("input[name='vocations']").val();
            $("#vocation").find("[value='"+vocations+"']").attr("selected",true);
            //
             var sources = $("input[name='sources']").val();
             $("#source").find("[value='"+sources+"']").attr("selected",true);
            //
            var interest = $("input[name='interest']").val();
            var arr = interest.split(',');
            $('#interests').selectpicker('val', arr);
            $('#interests').selectpicker('refresh');

        });
        $("#identityId").blur(function(){
            //获取输入身份证号码
            var UUserCard = $('#identityId').val();
            if(UUserCard != null){
                //获取出生日期
                $("#birthdayYear").val(UUserCard.substring(6, 10));
                $("#birthdayMonth").val(UUserCard.substring(10, 12));
                $("#birthdayDay").val(UUserCard.substring(12, 14));
                //UUserCard.substring(6, 10) + "-" + UUserCard.substring(10, 12) + "-" + UUserCard.substring(12, 14);
                //获取性别
                if (parseInt(UUserCard.substr(16, 1)) % 2 == 1) {
                    document.getElementById('sex1').checked=true
                    //是男则执行代码 ...
                } else {
                    document.getElementById('sex2').checked=true
                    //是女则执行代码 ...
                }
                //获取年龄
                var myDate = new Date();
                var month = myDate.getMonth() + 1;
                var day = myDate.getDate();
                var age = myDate.getFullYear() - UUserCard.substring(6, 10) - 1;
                if (UUserCard.substring(10, 12) < month || UUserCard.substring(10, 12) == month && UUserCard.substring(12, 14) <= day) {
                    age++;
                }
                $("#age").val(age);
                //年龄 age
            }
        })

        laydate.render({
            elem: '#birthdayYear',
            format: 'yyyy',
            type: 'year',
            done:function(value,data){
                getAge(value)
            }
        });

        function getAge(obj){
            // alert(data);
            // var birthyear = $("#birthdayYear").val()
            // alert(birthyear);
            if(obj==null)return   "请输入出生日期";
            var date = new Date();
            var year = date.getFullYear();
            var userage= year - obj;
            $("#age").val(userage)
            return false;
        }

        function changeInterest() {
            var interester =[];
            var obj = document.getElementById("interests");
            for (var i=0;i<obj.options.length;i++){
                if(obj.options[i].selected){
                    interester.push(obj.options[i].value);// 收集选中项
                }
            }
            $("#interest").val(interester)
        }
	</script>
</body>
</html>
