<!DOCTYPE html>
<html>
<meta charset="utf-8">
<head th:include="include :: header"></head>
<body class="gray-bg">
	<div class="wrapper wrapper-content ">
		<div class="row">
			<div class="col-sm-12">
				<div class="ibox float-e-margins">
					<div class="ibox-content">
						<form class="form-horizontal m-t" id="signupForm">
						<input id="cardNumber" name="cardNumber" th:value="${memberDO.cardNumber}"  type="hidden">
							<input id="costId" name="costId" th:value="${costDO.id}"  type="hidden">
							<input id="saleNumber" name="saleNumber" th:value="${costDO.saleNumber}"  type="hidden">
							<input id="saleName" name="saleName" th:value="${costDO.saleName}"  type="hidden">
							<input id="sumMoney" name="sumMoney" th:value="${costDO.sumMoney}"  type="hidden">
							<input id="originalPrice" name="originalPrice" th:value="${costDO.originalPrice}" type="hidden">
							<input id="payMoneys" name="payMoney" th:value="${settlement.payMoney}" type="hidden">
							<input id="payModels" name="payModels" th:value="${settlement.payModel}" type="hidden">
							<input id="modelMoneys" name="modelMoneys" th:value="${settlement.modelMoney}" type="hidden">
							<div class="form-group">	
								<label class="col-sm-3 control-label">会员卡号：</label>
								<div class="col-sm-8">
									<input id="memberNumber" name="memberNumber" th:value="${memberDO.cardNumber}" type="text" readonly>
									&nbsp;&nbsp;&nbsp;&nbsp;顾客姓名：<input id="cardName" name="cardName" th:value="${memberDO.name}" type="text" readonly>
								</div>
							</div>
							<h1 style="float: left;font-size: 20px">查询信息</h1>
							<table class="table table-bordered table-hover" >
								<thead>
								<tr class="success">
									<th style="text-align: center">销售单号</th>
									<th style="text-align: center">销售人员</th>
									<th style="text-align: center">原价合计</th>
									<th style="text-align: center">应收金额</th>
									<th style="text-align: center">实缴金额</th>
								</tr>
								</thead>
								<tbody >
								<tr>
									<td id="aa" style="text-align: center"></td>
									<td id="bb" style="text-align: center"></td>
									<td id="cc" style="text-align: center"></td>
									<td id="dd" style="text-align: center"></td>
									<td id="ee" style="text-align: center"></td>
								</tr>
								</tbody>
							</table>
														<div class="form-group">
								<label class="col-sm-3 control-label">实缴金额：</label>
								<div class="col-sm-8">
									<input id="actualMoney" name="actualMoney" type="text" th:value="${costDO.sumMoney}" disabled style="width: 20%">
									<!--&nbsp;&nbsp;&nbsp;&nbsp;找零金额：<input id="changeMoney" name="changeMoney" th:value="${settlement.changeMoney}" disabled style="width: 20%" type="text">-->
								</div>
							</div>

							<div id="model" style="display: none;">

							</div>

							<div class="form-group" id="div1" style="display: block">
								<label class="col-sm-3 control-label">缴费方式：</label>
								<div class="col-sm-8">
									<select  name="payModel" id="payModel" th:value="${settlement.payModel}" style="width: 30%">
										<option value="">请选择</option>
										<option value="0">微信</option>
										<option value="1">支付宝</option>
										<option value="2">医院收费处</option>
										<option value="3">一卡通</option>
										<option value="4">现金</option>
									</select>
									<input id="payModelss" name="payModelss" th:value="${settlement.payModel}"  type="hidden">
									&nbsp;&nbsp;&nbsp;&nbsp;<input id="payMoney" name="payMoney" th:value="${settlement.payMoney}" style="width: 20%" type="text" disabled>
								</div>
							</div>
														<!--<div class="form-group">-->
								<!--<label class="col-sm-3 control-label">找零金额：</label>-->
								<!--<div class="col-sm-8">-->
									<!--<input id="changeMoney" name="changeMoney" th:value="${settlement.changeMoney}" class="form-control" type="text">-->
								<!--</div>-->
							<!--</div>-->
														<!--<div class="form-group">	-->
								<!--<label class="col-sm-3 control-label">支付方式：</label>-->
								<!--<div class="col-sm-8">-->
									<!--<input id="payModel" name="payModel" th:value="${settlement.payModel}" class="form-control" type="text">-->
								<!--</div>-->
							<!--</div>-->
														<!--<div class="form-group">	-->
								<!--<label class="col-sm-3 control-label">缴费金额：</label>-->
								<!--<div class="col-sm-8">-->
									<!--<input id="payMoney" name="payMoney" th:value="${settlement.payMoney}" class="form-control" type="text">-->
								<!--</div>-->
							<!--</div>-->
																					<div class="form-group">
								<div class="col-sm-8 col-sm-offset-3">
									<button type="submit" class="btn btn-primary">提交</button>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
	</div>
	</div>
	<div th:include="include::footer"></div>
	<script type="text/javascript" src="/js/appjs/method/edit.js">
	</script>
<script type="text/javascript">
    // $().ready(function(){
    //     var payModels = $("input[name='payModels']").val();
    //     $("#payModel").find("[value="+payModels+"]").attr("selected",true);
    //     var saleNumber = $("#saleNumber").val()
    //     var saleName = $("#saleName").val()
		// var originalPrice = $("#originalPrice").val()
    //     var sumMoney = $("#sumMoney").val()
		// $("#aa").text(saleNumber)
    //     $("#bb").text(saleName)
    //     $("#cc").text(originalPrice)
    //     $("#dd").text(sumMoney)
    //     $("#ee").text(sumMoney)
    // });
    var html="";
    $().ready(function(){
        var payModels = $("#payModels").val();
        if (payModels.length >2){
            model.style="display:block";
            div1.style="display:none";
            var paymodelStr = payModels.split(",");
            var moneyPay = $("#modelMoneys").val().split(",");
            var paymodelArray = [];
            for (var s=0;s<paymodelStr.length;s++){
                if(''!= paymodelStr[s]){
                    // var payWay = "";
                    // if (paymodelStr[s] == "0"){
                    //     payWay = "微信";
                    // } else if (paymodelStr[s] == "1"){
                    //     payWay = "支付宝";
                    // } else if (paymodelStr[s] == "2"){
                    //     payWay = "医院收费处";
                    // } else if (paymodelStr[s] == "3"){
                    //     payWay = "一卡通";
                    // } else if (paymodelStr[s] == "4"){
                    //     payWay = "现金";
                    // }
                    html = "<div class='form-group'><label class='col-sm-3 control-label'>缴费方式：</label>";
                    html += "<div class='col-sm-8'><select  name='payModeloa' id='payModeloa' style='width: 30%'>";
                    html += "<option value=\"\">请选择</option>";
                    html += "<option value=\"0\">微信</option>";
                    html += "<option value=\"1\">支付宝</option>";
                    html += "<option value=\"2\">医院收费处</option>";
                    html += "<option value=\"3\">一卡通</option>";
                    html += "<option value=\"4\">现金</option>";
                    html += "</select>"
                     html += "<input  name='payModel' id='payMode' type='hidden'>";
                    html += "&nbsp;&nbsp;&nbsp;&nbsp;<input  name='payMoney' value='"+moneyPay[s]+"' type='text' disabled>";
                    html += "</div>";
                    html += "</div>";
                    var payMode = paymodelStr[s];
                    paymodelArray.push(payMode);
                    $("#payModeloa").find("[value="+payMode+"]").attr("selected",true);
                    $("#model").append(html);
                }

            }
            $("#payMode").val(paymodelArray);
            var saleNumber = $("#saleNumber").val()
            var saleName = $("#saleName").val()
            var sumMoney = $("#sumMoney").val()
            var originalPrice = $("#originalPrice").val()
            var payMoneys = $("#payMoneys").val();
            $("#aa").text(saleNumber)
            $("#bb").text(saleName)
            $("#cc").text(originalPrice)
            $("#dd").text(sumMoney)
            $("#ee").text(payMoneys)
        } else {
            var payModels = $("#payModels").val();
            var paymodelStr = payModels.split(",");
            // var payModelss = $("input[name='payModelss']").val();
            alert(paymodelStr[0]);
            $("#payModel").find("[value="+paymodelStr[0]+"]").attr("selected",true);
            var saleNumber = $("#saleNumber").val()
            var saleName = $("#saleName").val()
            var originalPrice = $("#originalPrice").val()
			alert(originalPrice);
            var sumMoney = $("#sumMoney").val()
            $("#aa").text(saleNumber)
            $("#bb").text(saleName)
            $("#cc").text(originalPrice)
            $("#dd").text(sumMoney)
            $("#ee").text(sumMoney)
            div1.style="display:block";
            model.style="display:none";
            // var payWay = "";
            // var money = $("#modelMoneys").val();
            // if (payModels == "0"){
            //     payWay = "微信";
            // } else if (payModels == "1"){
            //     payWay = "支付宝";
            // } else if (payModels == "2"){
            //     payWay = "医院收费处";
            // } else if (payModels == "3"){
            //     payWay = "一卡通";
            // } else if (payModels == "4"){
            //     payWay = "现金";
            // }
            // html = "<div class='form-group'><label class='col-sm-3 control-label'>缴费方式：</label>";
            // html += "<div class='col-sm-8'><input  name='payModel' id='payModel' value='"+payWay+"'>";
            // html += "&nbsp;&nbsp;&nbsp;&nbsp;<input  name='payMoney' value='"+money+"' type='text' disabled>";
            // html += "</div>";
            // html += "</div>";
            // $("#model").append(html);
        }
    });


</script>
</body>
</html>
