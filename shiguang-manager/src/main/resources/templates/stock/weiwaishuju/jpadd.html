<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="keywords" content=""/>
    <meta name="description" content=""/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title>收据2</title>
    <style type="text/css">
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            font-size: 14px;
        }

        .main {
            margin: 25px;
        }

        input[type="text"], select, textarea {
            width: 100%;
            line-height: 28px;
            outline: none;
            padding: 2px 10px;
            border: 1px solid #ddd;
        }

        select {
            height: 32px;
        }

        textarea {
            height: auto;
            font-size: 14px;
            resize: none;
        }

        h3 {
            font-size: 18px;
            margin-bottom: 10px;
        }

        table {
            width: 100%;
            text-align: center;
            margin-bottom: 20px;
        }

        table td {
            height: 36px;
            padding: 2px;
            border-bottom: 2px solid #fff;
            border-right: 2px solid #fff;
        }

        .tabA {
            background: #e9f0fa;
        }

        .tabA td:nth-child(odd) {
            background: #cddfeb;
        }

        .Xze, .qingK {
            width: 80px;
            height: 32px;
            margin-left: 10px;
            background: #0091f2;
            color: #fff;
            border: 1px solid #fff;
            outline: none;
            border-radius: 5px;
        }

        .tabB {
            background: #d4f2da;
        }

        .tabB td {
            width: 9.09%;
        }

        .tabB input, .tabC input {
            text-align: center;
        }

        .Add {
            width: 60%;
            height: 32px;
            background: #24c543;
            color: #fff;
            border: 1px solid #fff;
            outline: none;
            border-radius: 5px;
        }

        .tabC {
            background: #cbdde7;
        }

        .qingK {
            margin-left: 0;
        }

        .allpik input {
            width: 150px;
            height: 42px;
            font-size: 16px;
            letter-spacing: 2px;
            background: #0091f2;
            color: #fff;
            border: 2px solid #e9f0fa;
            outline: none;
            border-radius: 5px;
        }

        .tabB1 {
            background: #f6e2ee;
        }

        .tabB1 td {
            width: 12.5%;
        }

        .Add1 {
            width: 60%;
            height: 32px;
            background: #df5eab;
            color: #fff;
            border: 1px solid #fff;
            outline: none;
            border-radius: 5px;
        }

    </style>

</head>
<body>
<form class="form-horizontal m-t" id="signupForm">
    <div class="main">
        <h3>单据信息</h3>
        <input id="eyeStyle" name="eyeStyle" th:value="${eyeStyle}" type="hidden"/>
        <input id="mfrsid" name="mfrsid" th:value="${mfrsid}" type="hidden"/>
        <input id="mfrsname" name="mfrsname" th:value="${mfrsname}" type="hidden"/>
        <table class="tabA" border="0" cellspacing="0" cellpadding="0">
            <tbody>
            <tr>
                <td>销售单号</td>
                <td><input id="number" name="number" th:value="${danjunum}" readonly type="text"/></td>
                <td>单据日期</td>
                <td><input id="danjuDay" name="danjuDay" th:value="${danjuDay}" readonly type="text"/></td>
                <td>所属门店</td>
                <td>
                    <input  th:value="${departmentName}" readonly type="text"/>
                </td>
            </tr>
            <tr>
                <td>制单人</td>
                <td>
                    <input id="zhidanPeople" name="zhidanPeople" th:value="${zhidanPeople}" readonly type="text"/>
                </td>
                <td>镜片型</td>
                <td>
                    <input id="jcStyle" name="jcStyle" th:value="${eyeStyles}" readonly type="text"/>
                </td>
                <td>预计取镜时间</td>
                <td><input readonly id="timetime" name="timetime" type="text"/></td>
            </tr>
            <tr>
                <td>单据类型</td>
                <td>
                    <select id="danjuStyle" name="danjuStyle">
                        <option value="1">外部配镜单</option>
                        <option value="2">回修配镜单</option>
                        <option value="3">报残配镜单</option>
                    </select>
                </td>
                <td>原配镜单</td>
                <td style="text-align:left;">
                    <input id="peijingdan" name="peijingdan" readonly type="text" style="width:80%"/>
                    <input type="button" class="Xze" value="选择" onclick="PeiJing()"/>
                </td>
                <td>委外类型</td>
                <td>
                    <select id="weiwaiStyle" name="weiwaiStyle">
                        <option value="委外订单">委外订单</option>
                        <option value="委外加工">委外加工</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>备注</td>
                <td colspan="5"><textarea name="beizhu" id="beizhu" cols="30" rows="2"></textarea></td>
            </tr>
            </tbody>
        </table>

        <h3>度数录入</h3>
        <table id="jpdushu" class="tabB" border="0" cellspacing="0" cellpadding="0"></table>
        <table id="tab1"  class="tabB" border="0" cellspacing="0" cellpadding="0">
            <tr>
                <td></td>
                <td>球镜</td>
                <td>柱镜</td>
                <td>轴向</td>
                <td>ADD</td>
                <td>三菱镜</td>
                <td>基底</td>
                <td>瞳距（远）</td>
                <td>瞳距（近）</td>
                <!--				<td>选择</td>-->
            </tr>
            <tr>
                <td>OD</td>
                <td><input id="rightsph" name="rightsph" onblur="zhengfu(this)" onkeydown="xiaoshu(this)" type="text"/></td>
                <td><input id="rightcyl" name="rightcyl" onblur="zhengfu(this)" onkeydown="xiaoshu(this)" type="text"/></td>
                <td><input id="rightzx" name="rightzx" onblur="zhouxiang(this)" type="text"/></td>
                <td><input id="rightAdd" name="rightAdd" type="text"/></td>
                <td><input id="rightSlj" name="rightSlj" type="text"/></td>
                <td><input id="rightJd" name="rightJd" type="text"/></td>
                <td><input id="rightFartj" name="rightFartj" type="text"/></td>
                <td><input id="rightNeartj" name="rightNeartj" type="text"/></td>
                <!--				<td><input type="button" class="Add" value="单品添加商品" onclick="getGoods()" /></td>-->
            </tr>
            <tr>
                <td>OS</td>
                <td><input id="leftsph" name="leftsph" onblur="zhengfu(this)" onkeydown="xiaoshu(this)" type="text"/>
                </td>
                <td><input id="leftcyl" name="leftcyl" onblur="zhengfu(this)" onkeydown="xiaoshu(this)" type="text"/>
                </td>
                <td><input id="leftzx" name="leftzx" onblur="zhouxiang(this)" type="text"/></td>
                <td><input id="leftAdd" name="leftAdd" type="text"/></td>
                <td><input id="leftSlj" name="leftSlj" type="text"/></td>
                <td><input id="leftJd" name="leftJd" type="text"/></td>
                <td><input id="leftFartj" name="leftFartj" type="text"/></td>
                <td><input id="leftNeartj" name="leftNeartj" type="text"/></td>
                <!--				<td><input type="button" class="Add" value="单品添加商品" onclick="getGoods()"/></td>-->
            </tr>
        </table>
        <h3>商品列表</h3>
        <table id="jp" class="tabC" border="0" cellspacing="0" cellpadding="0"></table>
        <table id="tab2"   class="tabC" border="0" cellspacing="0" cellpadding="0">
            <tr>
                <td width="250">商品代码</td>
                <td width="250">商品名称</td>
                <td>镜片型</td>
                <td>球镜</td>
                <td>柱镜</td>
                <td>轴向</td>
                <td>下加</td>
                <td>棱镜</td>
                <td>基底</td>
                <td>瞳高</td>
                <td>数量</td>
                <td width="300">加工要求</td>
                <!--<td width="100">操作</td>-->
            </tr>
            <tr>
                <td><input type="text"/></td>
                <td><input type="text"/></td>
                <td><input type="text"/></td>
                <td><input type="text"/></td>
                <td><input type="text"/></td>
                <td><input type="text"/></td>
                <td><input type="text"/></td>
                <td><input type="text"/></td>
                <td><input type="text"/></td>
                <td><input type="text"/></td>
                <td><input type="text"/></td>
                <td><input type="text"/></td>
            </tr>
            <tr>
                <td><input type="text"/></td>
                <td><input type="text"/></td>
                <td><input type="text"/></td>
                <td><input type="text"/></td>
                <td><input type="text"/></td>
                <td><input type="text"/></td>
                <td><input type="text"/></td>
                <td><input type="text"/></td>
                <td><input type="text"/></td>
                <td><input type="text"/></td>
                <td><input type="text"/></td>
                <td><input type="text"/></td>
            </tr>
        </table>



        <div class="allpik"><input type="button" value="保存" onclick="save()"/></div>
    </div>
</form>
<div th:include="include::footer"></div>
<script type="text/javascript" src="/js/appjs/stock/weiwaishuju/jpadd.js"></script>
<script type="text/javascript">
    //日期
    laydate.render({
        elem: '#timetime',
        type: 'date'
    });


    var numAry = new Array();
    var codeAry = new Array();
    var nameAry = new Array();
    var leftRightArry = new Array();
    var storeDescribeArry = new Array();
    var storeCountArry = new Array();
    var classtypeArry = new Array();
    var processAskArry = new Array();
    var hyNameArry = new Array();
    var hyNumberArry = new Array();
    var phoneArry = new Array();
    var departnameArry = new Array();

    function PeiJing() {
        $("#tab1").remove();
        $("#tab2").remove();
        var html = "";
        var bhtml = "";
        var xsNumber="";
        var rightsphs="";
        var rightcyls="";
        var rightzxs="";
        var rightAdds="";
        var rightSljs="";
        var rightJds="";
        var rightFartjs="";
        var rightNeartjs="";

        var leftsphs="";
        var leftcyls="";
        var leftzxs="";
        var leftAdds="";
        var leftSljs="";
        var leftJds="";
        var leftFartjs="";
        var leftNeartjs="";
        var righttgs="";
        var lefttgs="";




        var eyeStyle = $('#eyeStyle').val();
        var mfrsid = $('#mfrsid').val();
        var mfrsname = $('#mfrsname').val();
        var toIndex = layer.open({
            type: 2,
            title: '原配镜单',
            maxmin: true,
            shadeClose: false, // 点击遮罩关闭层
            area: ['800px', '520px'],
            content: "/stock/weiwai/PeiJing/" + eyeStyle+ "/" +  mfrsid + "/" +  mfrsname,// iframe的url
            cancel: function (index, layero) {

                var rows = $(layero).find("iframe")[0].contentWindow.batchSelect();
                // alert(JSON.stringify(rows));
                for (var i = 0; i < rows.length; i++) {
                    // $("#departname").val(rows[0].mirorAddress);
                    xsNumber += rows[i].saleNumber + ',';
                    rightsphs += rows[i].rightsph + ',';
                    rightcyls += rows[i].rightcyl + ',';
                    rightzxs += rows[i].rightzx + ',';
                    rightAdds += rows[i].rightAdd + ',';
                    rightSljs += rows[i].rightSlja + ',';
                    rightJds += rows[i].rightJd + ',';
                    rightFartjs += rows[i].rightFartj + ',';
                    rightNeartjs += rows[i].rightNeartj + ',';

                    leftsphs += rows[i].leftsph + ',';
                    leftcyls += rows[i].leftcyl + ',';
                    leftzxs += rows[i].leftzx + ',';
                    leftAdds += rows[i].leftAdd + ',';
                    leftSljs += rows[i].leftSlja + ',';
                    leftJds += rows[i].leftJd + ',';
                    leftFartjs += rows[i].leftFartj + ',';
                    leftNeartjs += rows[i].leftNeartj + ',';

                    // alert( rows[i].righttg);
                    righttgs += rows[i].righttg + ',';
                    lefttgs += rows[i].lefttg + ',';

                    numAry[i]=rows[i].goodsNum;
                    codeAry[i]=rows[i].goodsCode;
                    nameAry[i]=rows[i].storeName;
                    leftRightArry[i]=rows[i].leftRight;
                    storeDescribeArry[i]=rows[i].storeDescribe;
                    storeCountArry[i]=rows[i].storeCount;
                    classtypeArry[i]=rows[i].classtype;
                    processAskArry[i]=rows[i].processAsk;//镜片区分
                    hyNameArry[i]=rows[i].name;//姓名 rows[i].name
                    hyNumberArry[i]=rows[i].memberNumber;//卡号rows[i].memberNumber
                    phoneArry[i]=rows[i].phone1;//电话rows[i].phone1
                    departnameArry[i]=rows[i].mirorAddress;//销售门店


                }
                if (eyeStyle == 3) {
                    //镜片
                    var allLength=xsNumber.split(",");//单据

                    var rightsph=rightsphs.split(",");
                    var rightcyl=rightcyls.split(",");
                    var rightzx=rightzxs.split(",");
                    var rightAdd=rightAdds.split(",");
                    var rightSlj=rightJds.split(",");
                    var rightJd=rightJds.split(",");
                    var rightFartj=rightFartjs.split(",");
                    var rightNeartj=rightNeartjs.split(",");

                    var leftsph=leftsphs.split(",");
                    var leftcyl=leftcyls.split(",");
                    var leftzx=leftzxs.split(",");
                    var leftAdd=leftAdds.split(",");
                    var leftSlj=leftSljs.split(",");
                    var leftJd=leftJds.split(",");
                    var leftFartj=leftFartjs.split(",");
                    var leftNeartj=leftNeartjs.split(",");
                    var righttg=righttgs.split(",");
                    var lefttg=lefttgs.split(",");

                    for (var b = 0; b< allLength.length-1; b++) {
                        html += "<tr>";
                        html+="<td></td>";
                        html+="<td>球镜</td>";
                        html+="<td>柱镜</td>";
                        html+="<td>轴向</td>";
                        html+="<td>ADD</td>";
                        html+="<td>三菱镜</td>";
                        html+="<td>基底</td>";
                        html+="<td>瞳距（远）</td>";
                        html+="<td>瞳距（近）</td>";
                        html+="</tr>";
                        html+="<tr>";
                        html+="<td>OD</td>";
                        html+="<td><input id='rightsph' value='"+rightsph[b]+"' onblur='zhengfu(this)' onkeydown='xiaoshu(this)' type='text'/></td>";
                        html+="<td><input id='rightcyl'  value='"+rightcyl[b]+"' onblur='zhengfu(this)' onkeydown='xiaoshu(this)' type='text'/></td>";
                        html+="<td><input id='rightzx'  value='"+rightzx[b]+"' onblur='zhouxiang(this)' type='text'/></td>";
                        html+="<td><input id='rightAdd'  value='"+rightAdd[b]+"' type='text'/></td>";
                        html+="<td><input id='rightSlj'  value='"+rightSlj[b]+"' type='text'/></td>";
                        html+="<td><input id='rightJd'  value='"+rightJd[b]+"' type='text'/></td>";
                        html+="<td><input id='rightFartj'  value='"+rightFartj[b]+"' type='text'/></td>";
                        html+="<td><input id='rightNeartj'  value='"+rightNeartj[b]+"'  type='text'/></td>";
                        html+="</tr>";
                        html+="<tr>";
                        html+="<td>OS</td>";
                        html+="<td><input id='leftsph'   value='"+leftsph[b]+"' onblur='zhengfu(this)' onkeydown='xiaoshu(this)' type='text'/></td>";
                        html+="<td><input id='leftcyl'   value='"+leftcyl[b]+"' onblur='zhengfu(this)' onkeydown='xiaoshu(this)' type='text'/></td>";
                        html+="<td><input id='leftzx'  value='"+leftzx[b]+"'onblur='zhouxiang(this)' type='text'/></td>";
                        html+="<td><input id='leftAdd'   value='"+leftAdd[b]+"' type='text'/></td>";
                        html+="<td><input id='leftSlj'   value='"+leftSlj[b]+"' type='text'/></td>";
                        html+="<td><input id='leftJd'   value='"+leftJd[b]+"' type='text'/></td>";
                        html+="<td><input id='leftFartj'   value='"+leftFartj[b]+"' type='text'/></td>";
                        html+="<td><input id='leftNeartj'   value='"+leftNeartj[b]+"' type='text'/></td>";
                        html+="</tr>";


                        var goodsNums=numAry[b];
                        var goodsCodes=codeAry[b];
                        var goodsNames=nameAry[b];
                        var goodsLeftRights=leftRightArry[b];
                        var goodsDescribes=storeDescribeArry[b];
                        var goodsCounts=storeCountArry[b];
                        var goodsClasstypes=classtypeArry[b];

                        // alert(processAskArry);
                        var processAsks= processAskArry[b];//加工要求
                        var hyNames= hyNameArry[b];
                        var hyNumbers= hyNumberArry[b];
                        var phones= phoneArry[b];
                        var departnames= departnameArry[b];


                        var goodNums=goodsNums.split(",");//代码
                        var goodCodes=goodsCodes.split(",");//条码
                        var leftRights=goodsLeftRights.split(",");//左右
                        var goodNames=goodsNames.split(",");//名称
                        var gooodDescribes = goodsDescribes.split(",");//描述
                        var goodCounts = goodsCounts.split(",");//数量
                        var goodClasstypes = goodsClasstypes.split(",");//定做还是成品
                        var processAsk = processAsks;//加工要求
                        var yaoqiu=processAsk.replaceAll(',', '!');
                        // alert(yaoqiu);
                        var hyName = hyNames.split(",");
                        var hyNumber = hyNumbers.split(",");
                        var phone = phones.split(",");
                        var departname = departnames.split(",");
                        // alert(goodsNums);
                        // alert(goodNums+"拆分");
                        // alert(goodNums.length+"长度");
                        // alert(processAsk);
                        bhtml += "<tr>";
                        bhtml += "<td width='250'>商品代码</td>";
                        bhtml += "<td width='250'>商品名称</td>";
                        bhtml += "<td>镜片型</td>";
                        bhtml += "<td>球镜</td>";
                        bhtml += "<td>柱镜</td>";
                        bhtml += "<td>轴向</td>";
                        bhtml += "<td>下加</td>";
                        bhtml += "<td>棱镜</td>";
                        bhtml += "<td>基底</td>";
                        bhtml += "<td>瞳高</td>";
                        bhtml += "<td>数量</td>";
                        bhtml += "<td width='300'>加工要求</td>";
                        bhtml += "</tr>";
                        for(var c= 0; c<goodNums.length; c++) {
                            // alert(goodNums[c]+"？代码");
                            // alert(goodCodes[c]+"？条码");
                            // alert(leftRights[c]+"？左右");
                            // alert(goodNames[c]+"？名称");
                            // alert(gooodDescribes[c]+"？描述");
                            // alert(goodCounts[c]+"？数量");
                            // alert(goodClasstypes[c]+"？成品定制");
                            // alert(processAsk);


                            if (gooodDescribes[c] == "镜片") {
                                if (leftRights[c] == "右") {
                                    var sph = rightsph[b];
                                    var cyl = rightcyl[b];
                                    var zx = rightzx[b];
                                    var xj = rightAdd[b];
                                    var lj = rightSlj[b];
                                    var jd = rightJd[b];
                                    var tg = righttg[b];
                                    var far = rightFartj[b];
                                    var near = rightNeartj[b];
                                    if (goodClasstypes[c] == "2") {
                                        bhtml += "<tr>";
                                        bhtml += "<td><input id='num' name='num'  value='" + goodNums[c] + "' type='text' /></td>";
                                        bhtml += "<td><input id='name' name='name'  value='" + goodNames[c] + "' type='text' /></td>";
                                        bhtml += "<td><input id='leftRight' name='leftRight'  value='" + leftRights[c] + "' type='text' /></td>";
                                        bhtml += "<td><input id='sph' name='sph'  value='" + sph + "' type='text' /></td>";
                                        bhtml += "<td><input id='cyl' name='cyl' value='" + cyl + "' type='text' /></td>";
                                        bhtml += "<td><input id='zx'  name='zx' value='" + zx + "' type='text' /></td>";
                                        bhtml += "<td><input id='add'  name='add' value='" + xj + "' type='text' /></td>";
                                        bhtml += "<td><input id='slj'  name='slj' value='" + lj + "' type='text' /></td>";
                                        bhtml += "<td><input id='jd' name='jd' value='" + jd + "' type='text' /></td>";
                                        bhtml += "<td><input id='tg' name='tg' value='" +  tg+ "' type='text' /></td>";
                                        bhtml += "<td style='display: none'><input id='fartj' name='fartj' value='" +  far+ "' type='text' /></td>";
                                        bhtml += "<td style='display: none'><input id='neartj' name='neartj' value='" +  near+ "' type='text' /></td>";
                                        bhtml += "<td><input id='count' name='count'  value='" + goodCounts[c] + "' type='text'/></td>";
                                        bhtml += "<td><input id='yaoqiu' name='yaoqiu' value='" + yaoqiu  + "' type='text' /></td>";

                                        bhtml += "<td style='display: none'><input id='code' name='code' value='" + goodCodes[c] + "' type='text' /></td>";
                                        bhtml += "<td style='display: none'><input id='saleNumber' name='saleNumber' value='" + allLength[b] + "' type='text'/></td>";
                                        bhtml += "<td style='display: none'><input id='gkname' name='gkname' value='" + hyName[0] + "' type='text'/></td>";
                                        bhtml += "<td style='display: none'><input id='hyknum' name='hyknum' value='" + hyNumber[0] + "' type='text'/></td>";
                                        bhtml += "<td style='display: none'><input id='phone' name='phone' value='" + phone[0] + "' type='text'/></td>";
                                        bhtml += "<td style='display: none'><input id='departname' name='departname' value='" + departname[0] + "' type='text'/></td>";
                                        bhtml += "</tr>";
                                    }
                                } else if (leftRights[c] == "左") {
                                    var sph = leftsph[b];
                                    var cyl = leftcyl[b];
                                    var zx = leftzx[b];
                                    var xj = leftAdd[b];
                                    var lj = leftSlj[b];
                                    var jd = leftJd[b];
                                    var tg = lefttg[b];
                                    var far = leftFartj[b];
                                    var near = leftNeartj[b];
                                    if (goodClasstypes[c] == "2") {
                                        bhtml += "<tr>";
                                        bhtml += "<td><input id='num' name='num'  value='" + goodNums[c] + "' type='text' /></td>";
                                        bhtml += "<td><input id='name' name='name'  value='" + goodNames[c] + "' type='text' /></td>";
                                        bhtml += "<td><input id='leftRight' name='leftRight'  value='" + leftRights[c] + "' type='text' /></td>";
                                        bhtml += "<td><input id='sph' name='sph'  value='" + sph + "' type='text' /></td>";
                                        bhtml += "<td><input id='cyl' name='cyl' value='" + cyl + "' type='text' /></td>";
                                        bhtml += "<td><input id='zx'  name='zx' value='" + zx + "' type='text' /></td>";
                                        bhtml += "<td><input id='add'  name='add' value='" + xj + "' type='text' /></td>";
                                        bhtml += "<td><input id='slj'  name='slj' value='" + lj + "' type='text' /></td>";
                                        bhtml += "<td><input id='jd' name='jd' value='" + jd + "' type='text' /></td>";
                                        bhtml += "<td><input id='tg' name='tg' value='" +  tg+ "' type='text' /></td>";
                                        bhtml += "<td style='display: none'><input id='fartj' name='fartj' value='" +  far+ "' type='text' /></td>";
                                        bhtml += "<td style='display: none'><input id='neartj' name='neartj' value='" +  near+ "' type='text' /></td>";
                                        bhtml += "<td><input id='count' name='count'  value='" + goodCounts[c] + "' type='text'/></td>";
                                        bhtml += "<td><input id='yaoqiu' name='yaoqiu' value='" + yaoqiu  + "' type='text' /></td>";

                                        bhtml += "<td style='display: none'><input id='code' name='code' value='" + goodCodes[c] + "' type='text' /></td>";
                                        bhtml += "<td style='display: none'><input id='saleNumber' name='saleNumber' value='" + allLength[b] + "' type='text'/></td>";
                                        bhtml += "<td style='display: none'><input id='gkname' name='gkname' value='" + hyName[0] + "' type='text'/></td>";
                                        bhtml += "<td style='display: none'><input id='hyknum' name='hyknum' value='" + hyNumber[0] + "' type='text'/></td>";
                                        bhtml += "<td style='display: none'><input id='phone' name='phone' value='" + phone[0] + "' type='text'/></td>";
                                        bhtml += "<td style='display: none'><input id='departname' name='departname' value='" + departname[0] + "' type='text'/></td>";
                                        bhtml += "</tr>";
                                    }
                                }


                            }
                        }
                    }
                    $("#jp").append(bhtml);
                    $("#jpdushu").append(html);
                }
                var peijiang=$("#peijingdan").val();
                $("#peijingdan").val(peijiang+xsNumber);

            }
        });
        layer.full(toIndex);
    }

    //正负+—
    function zhengfu(e) {//正负用onblur事件触发
        var val = parseFloat(e.value);
        if (val > 0) {
            e.value = "+" + val.toFixed(2)
        } else if (val <= 0) {
            e.value = val.toFixed(2)
        }
    };
</script>
</body>
</html>

