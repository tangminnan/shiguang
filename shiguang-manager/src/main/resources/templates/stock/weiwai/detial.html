<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="keywords" content=""/>
    <meta name="description" content=""/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title>委外订单详情</title>
    <link rel="stylesheet" href="/css/css.css" type="text/css">
    <script type="text/javascript" src="/js/jquery-1.11.3.min.js"></script>
    <script type="text/javascript" src="/js/jquery.SuperSlide.2.1.1.js"></script>
</head>
<body>
<form class="form-horizontal m-t" id="signupForm">
    <div class="m40 tabS msgBox">
        <h3>单据信息</h3>
        <table border="0" cellspacing="0" cellpadding="0">
            <tr>
                <td>单据编号：</td>
                <td><input id="danjuNumber" name="danjuNumber" th:value="${weiwai.danjuNumber}" type="text" readonly>
                </td>
                <td>单据日期：</td>
                <td><input id="danjuDay" name="danjuDay" th:value="${weiwai.danjuDay}" type="text" readonly></td>
                <td>订单类型：</td>
                <td>
                    <input id="eyeStyle" name="eyeStyle" th:value="${eyeStyle}" type="text" readonly></td>
            </tr>
            <tr>
                <td>制单人：</td>
                <td>
                    <input id="zhidanPeople" name="zhidanPeople" th:value="${weiwai.zhidanPeople}" type="text"
                           readonly/>
                </td>
                <td>制造商：</td>
                <td>

                    <input id="mfrsname" name="mfrsname" th:value="${weiwai.mfrsname}" type="text" readonly/>

                </td>
                <td>收入仓位：</td>
                <td>
                    <input id="positionName" name="positionName" th:value="${weiwai.positionName}" type="text"
                           readonly/>
                </td>

            </tr>
            <tr>
                <td>收货联系人：</td>
                <td>
                    <input id="shouhuoPeople" name="shouhuoPeople" th:value="${weiwai.shouhuoPeople}" readonly
                           type="text"/>
                </td>
                <td>收货联系电话：</td>
                <td>
                    <input id="shouhuoPhone" name="shouhuoPhone" th:value="${weiwai.shouhuoPhone}" type="text"
                           readonly/>
                </td>
                <td>收货地址：</td>
                <td>
                    <input id="shouhuoAddress" name="shouhuoAddress" th:value="${weiwai.shouhuoAddress}" type="text"
                           readonly/>
                </td>
            </tr>
            <tr>
                <td>备注：</td>
                <td colspan="5">
                    <textarea rows="3" id="beizhu" name="beizhu" th:text="${weiwai.beizhu}" type="text"
                              readonly></textarea>
                </td>
            </tr>

        </table>

        <div class="BQ-btn">
            <input type="button" class="H_bc" value="打印配镜单" onclick="dayin()"/>
        </div>
    </div>
    <div class="m40 tabS msgBoxDD">
        <table border="0" cellspacing="0" cellpadding="0" class="buyBtns">
            <tbody>
            <tr id="tab1" style="display:none">
                <td style="width: 100vw;">
                    <table id="jp">
                        <tr class="thead">
                            <td>配镜单号</td>
                            <td>取镜时间</td>
                            <td>商品名称</td>
                            <td>委外方式</td>
                            <td>镜片类型</td>
                            <td>数量</td>
                            <td>球镜</td>
                            <td>柱镜</td>
                            <td>轴向</td>
                            <td>下加</td>
                            <td>棱镜</td>
                            <td>直径</td>
                            <td>加工要求</td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr id="tab2" style="display:none;">
                <td style="width: 100vw;">
                    <table id="yx">
                        <tr class="thead">
                            <td>配镜单号</td>
                            <td>取镜时间</td>
                            <td>商品名称</td>
                            <td>委外方式</td>
                            <td>镜片类型</td>
                            <td>数量</td>
                            <td>球镜</td>
                            <td>柱镜</td>
                            <td>轴向</td>
                            <td>基底</td>
                            <td>曲率</td>
                            <td>直径</td>
                            <td>加工要求</td>
                        </tr>
                       

                    </table>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</form>

<div th:include="include::footer"></div>
<script type="text/javascript">
    $(document).ready(function () {
        var danjuNumber = $('#danjuNumber').val();
        var eyeStyle = $('#eyeStyle').val();
        var html="";
        if (eyeStyle == '框镜订做') {
            tab1.style = "display: block";
            tab2.style = "display: none";
        }else if (eyeStyle == '隐形订做') {
            tab1.style = "display: none";
            tab2.style = "display: block";
        }
        $.ajax({
            url: '/stock/weiwai/selectWeiwaiOrder',
            type: 'post',
            dataType: "json",
            data: {
                'danjuNumber': danjuNumber
            },
            success: function (xml) {
                for (var i = 0; i < xml.length; i++) {
                    if (eyeStyle == '框镜订做') {
                        var saleNumber=xml[i].saleNumber.split(',');
                        var mirrorTime=xml[i].mirrorTime.split(',');
                        var goodsName=xml[i].goodsName.split(',');
                        var style=xml[i].style.split(',');
                        var rl=xml[i].rl.split(',');
                        var count=xml[i].count.split(',');
                        var sph=xml[i].sph.split(',');
                        var cyl=xml[i].cyl.split(',');
                        var axial=xml[i].axial.split(',');
                        var lightbelow=xml[i].lightbelow.split(',');
                        var lengjing=xml[i].lengjing.split(',');
                        var diameter=xml[i].diameter.split(',');
                        var yaoqiu=xml[i].yaoqiu.split(',');
                        for (var t=0;t<saleNumber.length;t++){
                            html += "<tr>";
                            html += "<td>"+saleNumber[t]+"</td>";
                            html += "<input id='saleNumber' name='saleNumber'   value='" + saleNumber[t] + "'  type='hidden'readonly/>";
                            html += "<td>"+mirrorTime[t]+"</td>";
                            html += "<input id='mirrorTime' name='mirrorTime'   value='" + mirrorTime[0] + "'  type='hidden'readonly/>";
                            html += "<td>"+goodsName[t]+"</td>";
                            html += "<input id='goodsName' name='goodsName'   value='" + goodsName[t] + "'  type='hidden'readonly/>";
                            html += "<td>"+style[t]+"</td>";
                            html += "<input id='style' name='style'   value='" + style[t] + "'  type='hidden'readonly/>";
                            html += "<td>"+rl[t]+"</td>";
                            html += "<input id='rl' name='rl'   value='" + rl[t] + "'  type='hidden'readonly/>";
                            html += "<td>"+count[t]+"</td>";
                            html += "<input id='count' name='count'   value='" + count[t] + "'  type='hidden'readonly/>";
                            html += "<td>"+sph[t]+"</td>";
                            html += "<input id='sph' name='sph'   value='" + sph[t] + "'  type='hidden'readonly/>";
                            html += "<td>"+cyl[t]+"</td>";
                            html += "<input id='cyl' name='cyl'   value='" + cyl[t] + "'  type='hidden'readonly/>";
                            html += "<td>"+axial[t]+"</td>";
                            html += "<input id='axial' name='axial'   value='" + axial[t] + "'  type='hidden'readonly/>";
                            html += "<td>"+lightbelow[t]+"</td>";
                            html += "<input id='lightbelow' name='lightbelow'   value='" + lightbelow[t] + "'  type='hidden'readonly/>";
                            html += "<td>"+lengjing[t]+"</td>";
                            html += "<input id='lengjing' name='lengjing'   value='" + lengjing[t] + "'  type='hidden'readonly/>";
                            html += "<td>"+diameter[t]+"</td>";
                            html += "<input id='diameter' name='diameter'   value='" + diameter[t] + "'  type='hidden'readonly/>";
                            html += "<td>"+yaoqiu[t]+"</td>";
                            html += "<input id='yaoqiu' name='yaoqiu'   value='" + yaoqiu[t]  + "'  type='hidden'readonly/>";
                            html += "</tr>";
                        }
                        $('#jp').append(html);
                    }else if (eyeStyle =="隐形订做"){
                        var saleNumber=xml[i].saleNumber.split(',');
                        var mirrorTime=xml[i].mirrorTime.split(',');
                        var goodsName=xml[i].goodsName.split(',');
                        var style=xml[i].style.split(',');
                        var rl=xml[i].rl.split(',');
                        var count=xml[i].count.split(',');
                        var sph=xml[i].sph.split(',');
                        var cyl=xml[i].cyl.split(',');
                        var axial=xml[i].axial.split(',');
                        var jd=xml[i].jd.split(',');
                        var curvature=xml[i].curvature.split(',');
                        var diameter=xml[i].diameter.split(',');
                        var yaoqiu=xml[i].yaoqiu.split(',');
                        for (var t=0;t<saleNumber.length;t++){
                            html += "<tr>";
                            html += "<td>"+saleNumber[t]+"</td>";
                            html += "<input id='saleNumber' name='saleNumber'   value='" + saleNumber[t] + "'  type='hidden'readonly/>";
                            html += "<td>"+mirrorTime[t]+"</td>";
                            html += "<input id='mirrorTime' name='mirrorTime'   value='" + mirrorTime[t] + "'  type='hidden'readonly/>";
                            html += "<td>"+goodsName[t]+"</td>";
                            html += "<input id='goodsName' name='goodsName'   value='" + goodsName[t] + "'  type='hidden'readonly/>";
                            html += "<td>"+style[t]+"</td>";
                            html += "<input id='style' name='style'   value='" + style[t] + "'  type='hidden'readonly/>";
                            html += "<td>"+rl[t]+"</td>";
                            html += "<input id='rl' name='rl'   value='" + rl[t] + "'  type='hidden'readonly/>";
                            html += "<td>"+count[t]+"</td>";
                            html += "<input id='count' name='count'   value='" + count[t] + "'  type='hidden'readonly/>";
                            html += "<td>"+sph[t]+"</td>";
                            html += "<input id='sph' name='sph'   value='" + sph[t] + "'  type='hidden'readonly/>";
                            html += "<td>"+cyl[t]+"</td>";
                            html += "<input id='cyl' name='cyl'   value='" + cyl[t] + "'  type='hidden'readonly/>";
                            html += "<td>"+axial[t]+"</td>";
                            html += "<input id='axial' name='axial'   value='" + axial[t] + "'  type='hidden'readonly/>";
                            html += "<td>"+jd[t]+"</td>";
                            html += "<input id='jd' name='jd'   value='" + jd[t] + "'  type='hidden'readonly/>";
                            html += "<td>"+curvature[t]+"</td>";
                            html += "<input id='curvature' name='curvature'   value='" + curvature[t] + "'  type='hidden'readonly/>";
                            html += "<td>"+diameter[t]+"</td>";
                            html += "<input id='diameter' name='diameter'   value='" + diameter[t] + "'  type='hidden'readonly/>";
                            html += "<td>"+yaoqiu[t]+"</td>";
                            html += "<input id='yaoqiu' name='yaoqiu'   value='" + yaoqiu[t]  + "'  type='hidden'readonly/>";
                            html += "</tr>";
                        }
                        $('#yx').append(html);
                    }
                    
                }

            }
        })
    });
    function dayin() {
        var eyeStyle = $('#eyeStyle').val();
        var danjuNumber = $('#danjuNumber').val();
        if (eyeStyle == '框镜订做') {
            window.open("/stock/weiwai/jkPeijingdan?danjuNumber=" + danjuNumber);
        } else if (eyeStyle == '隐形订做') {
            window.open("/stock/weiwai/yxPeijingdan?danjuNumber=" + danjuNumber);
        }
    }

</script>
</body>
</html>
