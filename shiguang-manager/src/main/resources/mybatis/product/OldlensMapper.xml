<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.shiguang.product.dao.OldlensDao">

    <select id="get" resultType="com.shiguang.product.domain.OldlensDO">
select m.`mfrsname`,b.`brandname`,u.`unitname`,o.`id`,o.`produc_num`,o.`produc_code`,o.`produc_name`,o.`mfrsid`,o.`brandid`,o.`brandnum`,o.`factory`,o.`produc_factory`,
o.`produc_factorycolor`,o.`unitid`,o.`old_id`,o.`batchid`,o.`size`,o.`color`,o.`style_id`,o.`tax`,o.`tax_price`,o.`trade_price`,
o.`transfer_price`,o.`retail_price` ,o.`status`,o.`state`
from aa_oldlens o left join c_mfrs m on o.mfrsid=m.mfrsid left join c_brand b on o.brandnum=b.brandnum
left join  c_unit u on o.unitid= u.unitid
where id = #{value}
</select>

    <select id="list" resultType="com.shiguang.product.domain.OldlensDO">
select
m.`mfrsname`,b.`brandname`,u.`unitname`,o.`id`,o.`produc_num`,o.`produc_code`,o.`produc_name`,o.`mfrsid`,o.`brandnum`,o.`brandid`,o.`factory`,o.`produc_factory`,
o.`produc_factorycolor`,o.`unitid`,o.`old_id`,o.`batchid`,o.`size`,o.`color`,o.`style_id`,o.`tax`,o.`tax_price`,o.`trade_price`,
o.`transfer_price`,o.`retail_price`,o.`status`,o.`state`
from aa_oldlens o left join c_mfrs m on o.mfrsid=m.mfrsid left join c_brand b on o.brandnum=b.brandnum
left join c_unit u on o.unitid= u.unitid
where o.state= 1
group by o.id order by o.status asc ,o.id asc
</select>

    <select id="count" resultType="int">
        select count(*) from aa_oldlens
        <where>
            <if test="id != null and id != ''">and id = #{id}</if>
            <if test="producNum != null and producNum != ''">and produc_num = #{producNum}</if>
            <if test="producCode != null and producCode != ''">and produc_code = #{producCode}</if>
            <if test="producName != null and producName != ''">and produc_name = #{producName}</if>
            <if test="mfrsid != null and mfrsid != ''">and mfrsid = #{mfrsid}</if>
            <if test="brandid != null and brandid != ''">and brandid = #{brandid}</if>
            <if test="brandnum != null and brandnum != ''">and brandnum = #{brandnum}</if>
            <if test="factory != null and factory != ''">and factory = #{factory}</if>
            <if test="producFactory != null and producFactory != ''">and produc_factory = #{producFactory}</if>
            <if test="producFactorycolor != null and producFactorycolor != ''">and produc_factorycolor =
                #{producFactorycolor}
            </if>
            <if test="unitid != null and unitid != ''">and unitid = #{unitid}</if>
            <if test="oldId != null and oldId != ''">and old_id = #{oldId}</if>
            <if test="batchid != null and batchid != ''">and batchid = #{batchid}</if>
            <if test="size != null and size != ''">and size = #{size}</if>
            <if test="color != null and color != ''">and color = #{color}</if>
            <if test="styleId != null and styleId != ''">and style_id = #{styleId}</if>
            <if test="tax != null and tax != ''">and tax = #{tax}</if>
            <if test="taxPrice != null and taxPrice != ''">and tax_price = #{taxPrice}</if>
            <if test="tradePrice != null and tradePrice != ''">and trade_price = #{tradePrice}</if>
            <if test="transferPrice != null and transferPrice != ''">and transfer_price = #{transferPrice}</if>
            <if test="retailPrice != null and retailPrice != ''">and retail_price = #{retailPrice}</if>
            <if test="status != null and status != ''">and status = #{status}</if>
            <if test="state != null and state != ''">and state = #{state}</if>
        </where>
    </select>

    <insert id="save" parameterType="com.shiguang.product.domain.OldlensDO" useGeneratedKeys="true" keyProperty="id">
insert into aa_oldlens
(
`produc_num`,
`produc_code`,
`produc_name`,
`mfrsid`,
`brandid`,
`brandnum`,
`factory`,
`produc_factory`,
`produc_factorycolor`,
`unitid`,
`old_id`,
`batchid`,
`size`,
`color`,
`style_id`,
`tax`,
`tax_price`,
`trade_price`,
`transfer_price`,
`retail_price`,
`status`,
`state`
)
values
(
#{producNum},
#{producCode},
#{producName},
#{mfrsid},
#{brandid},
#{brandnum},
#{factory},
#{producFactory},
#{producFactorycolor},
#{unitid},
#{oldId},
#{batchid},
#{size},
#{color},
#{styleId},
#{tax},
#{taxPrice},
#{tradePrice},
#{transferPrice},
#{retailPrice},
#{status},
#{state}
)
</insert>

    <update id="update" parameterType="com.shiguang.product.domain.OldlensDO">
        update aa_oldlens
        <set>
            <if test="producNum != null">`produc_num` = #{producNum},</if>
            <if test="producCode != null">`produc_code` = #{producCode},</if>
            <if test="producName != null">`produc_name` = #{producName},</if>
            <if test="mfrsid != null">`mfrsid` = #{mfrsid},</if>
            <if test="brandid != null">`brandid` = #{brandid},</if>
            <if test="brandnum != null">`brandnum` = #{brandnum},</if>
            <if test="factory != null">`factory` = #{factory},</if>
            <if test="producFactory != null">`produc_factory` = #{producFactory},</if>
            <if test="producFactorycolor != null">`produc_factorycolor` = #{producFactorycolor},</if>
            <if test="unitid != null">`unitid` = #{unitid},</if>
            <if test="oldId != null">`old_id` = #{oldId},</if>
            <if test="batchid != null">`batchid` = #{batchid},</if>
            <if test="size != null">`size` = #{size},</if>
            <if test="color != null">`color` = #{color},</if>
            <if test="styleId != null">`style_id` = #{styleId},</if>
            <if test="tax != null">`tax` = #{tax},</if>
            <if test="taxPrice != null">`tax_price` = #{taxPrice},</if>
            <if test="tradePrice != null">`trade_price` = #{tradePrice},</if>
            <if test="transferPrice != null">`transfer_price` = #{transferPrice},</if>
            <if test="retailPrice != null">`retail_price` = #{retailPrice},</if>
            <if test="status != null">`status` = #{status},</if>
            <if test="state != null">`state` = #{state}</if>
        </set>
        where id = #{id}
    </update>

    <delete id="remove">
delete from aa_oldlens where id = #{value}
</delete>

    <delete id="batchRemove">
        delete from aa_oldlens where id in
        <foreach item="id" collection="array" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>

    <!--菜单联动显示-->
    <select id="choice" resultType="com.shiguang.product.domain.OldlensDO">
        select  brandid,brandnum ,brandname  from c_brand  where mfrsid=#{mfrsid} and goodsid=#{goodsid} group by brandid
    </select>
    <!--删除状态修改-->
    <update id="updateState" parameterType="com.shiguang.product.domain.OldlensDO">
          update aa_oldlens set `state` = #{state} where id = #{id}
    </update>
</mapper>